var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function l(t){t.forEach(n)}function c(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let s,r;function a(t,n){return s||(s=document.createElement("a")),s.href=n,t===s.href}function i(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function h(t){t.parentNode.removeChild(t)}function f(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function m(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function $(){return p(" ")}function d(){return p("")}function v(t,n,e,l){return t.addEventListener(n,e,l),()=>t.removeEventListener(n,e,l)}function g(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function D(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function I(t,n){t.value=null==n?"":n}function w(t,n,e,l){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,l?"important":"")}function y(t,n,e){t.classList[e?"add":"remove"](n)}function b(t){r=t}function k(t){(function(){if(!r)throw new Error("Function called outside component initialization");return r})().$$.on_mount.push(t)}const q=[],x=[],M=[],C=[],L=Promise.resolve();let j=!1;function N(t){M.push(t)}function _(t){C.push(t)}const B=new Set;let E=0;function T(){const t=r;do{for(;E<q.length;){const t=q[E];E++,b(t),S(t.$$)}for(b(null),q.length=0,E=0;x.length;)x.pop()();for(let t=0;t<M.length;t+=1){const n=M[t];B.has(n)||(B.add(n),n())}M.length=0}while(q.length);for(;C.length;)C.pop()();j=!1,B.clear(),b(t)}function S(t){if(null!==t.fragment){t.update(),l(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(N)}}const O=new Set;let A;function H(){A={r:0,c:[],p:A}}function P(){A.r||l(A.c),A=A.p}function U(t,n){t&&t.i&&(O.delete(t),t.i(n))}function Y(t,n,e,l){if(t&&t.o){if(O.has(t))return;O.add(t),A.c.push((()=>{O.delete(t),l&&(e&&t.d(1),l())})),t.o(n)}else l&&l()}function z(t,n,e){const l=t.$$.props[n];void 0!==l&&(t.$$.bound[l]=e,e(t.$$.ctx[l]))}function J(t){t&&t.c()}function F(t,e,o,s){const{fragment:r,on_mount:a,on_destroy:i,after_update:u}=t.$$;r&&r.m(e,o),s||N((()=>{const e=a.map(n).filter(c);i?i.push(...e):l(e),t.$$.on_mount=[]})),u.forEach(N)}function R(t,n){const e=t.$$;null!==e.fragment&&(l(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function V(t,n){-1===t.$$.dirty[0]&&(q.push(t),j||(j=!0,L.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function W(n,c,o,s,a,i,u,f=[-1]){const m=r;b(n);const p=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(m?m.$$.context:[])),callbacks:e(),dirty:f,skip_bound:!1,root:c.target||m.$$.root};u&&u(p.root);let $=!1;if(p.ctx=o?o(n,c.props||{},((t,e,...l)=>{const c=l.length?l[0]:e;return p.ctx&&a(p.ctx[t],p.ctx[t]=c)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](c),$&&V(n,t)),e})):[],p.update(),$=!0,l(p.before_update),p.fragment=!!s&&s(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(h)}else p.fragment&&p.fragment.c();c.intro&&U(n.$$.fragment),F(n,c.target,c.anchor,c.customElement),T()}b(m)}class G{$destroy(){R(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(t){let n,e,l,c,o,s,r,f=t[1].name+"";return{c(){n=m("channel"),e=m("img"),o=$(),s=m("name"),r=p(f),g(e,"alt",l=t[1].name+"}"),a(e.src,c=t[1].vidID?`https://i3.ytimg.com/vi/${t[1].vidID}/maxresdefault.jpg`:"ytempty.svg")||g(e,"src",c),g(e,"class","svelte-1qkpr1u"),g(s,"class","svelte-1qkpr1u"),g(n,"class","svelte-1qkpr1u"),y(n,"winner",t[2])},m(t,l){u(t,n,l),i(n,e),i(n,o),i(n,s),i(s,r)},p(t,o){2&o&&l!==(l=t[1].name+"}")&&g(e,"alt",l),2&o&&!a(e.src,c=t[1].vidID?`https://i3.ytimg.com/vi/${t[1].vidID}/maxresdefault.jpg`:"ytempty.svg")&&g(e,"src",c),2&o&&f!==(f=t[1].name+"")&&D(r,f),4&o&&y(n,"winner",t[2])},d(t){t&&h(n)}}}function Q(t){let n,e,c,o,s,r,f,d,I,w,b,k,q,x,M=t[1].name+"";return{c(){n=m("channel"),e=m("img"),s=$(),r=m("name"),f=p(M),d=$(),I=m("a"),w=m("img"),g(e,"alt",c=t[1].name+"}"),a(e.src,o=t[1].vidID?`https://i3.ytimg.com/vi/${t[1].vidID}/maxresdefault.jpg`:"ytempty.svg")||g(e,"src",o),g(e,"class","svelte-1qkpr1u"),g(r,"class","svelte-1qkpr1u"),g(w,"class","logo svelte-1qkpr1u"),g(w,"alt","Youtube logo"),a(w.src,b="yt.svg")||g(w,"src","yt.svg"),g(I,"href",k=`https://www.youtube.com/watch?v=${t[1].vidID}`),g(I,"target","_blank"),g(n,"class","svelte-1qkpr1u"),y(n,"winner",t[2]),y(n,"focused",t[0])},m(l,c){u(l,n,c),i(n,e),i(n,s),i(n,r),i(r,f),i(r,d),i(n,I),i(I,w),q||(x=[v(e,"click",t[3]),v(r,"click",t[3])],q=!0)},p(t,l){2&l&&c!==(c=t[1].name+"}")&&g(e,"alt",c),2&l&&!a(e.src,o=t[1].vidID?`https://i3.ytimg.com/vi/${t[1].vidID}/maxresdefault.jpg`:"ytempty.svg")&&g(e,"src",o),2&l&&M!==(M=t[1].name+"")&&D(f,M),2&l&&k!==(k=`https://www.youtube.com/watch?v=${t[1].vidID}`)&&g(I,"href",k),4&l&&y(n,"winner",t[2]),1&l&&y(n,"focused",t[0])},d(t){t&&h(n),q=!1,l(x)}}}function X(n){let e;function l(t,n){return t[0]?Q:K}let c=l(n),o=c(n);return{c(){o.c(),e=d()},m(t,n){o.m(t,n),u(t,e,n)},p(t,[n]){c===(c=l(t))&&o?o.p(t,n):(o.d(1),o=c(t),o&&(o.c(),o.m(e.parentNode,e)))},i:t,o:t,d(t){o.d(t),t&&h(e)}}}function Z(t,n,e){let l,c,{controller:o}=n,{channels:s}=n,{matchID:r}=n,{matches:a}=n,{selector:i}=n,{focused:u=!1}=n;return t.$$set=t=>{"controller"in t&&e(5,o=t.controller),"channels"in t&&e(6,s=t.channels),"matchID"in t&&e(7,r=t.matchID),"matches"in t&&e(4,a=t.matches),"selector"in t&&e(8,i=t.selector),"focused"in t&&e(0,u=t.focused)},t.$$.update=()=>{464&t.$$.dirty&&(null===a[r][i]?e(1,l={name:"TBD"}):s[a[r][i]]?e(1,l=s[a[r][i]]):e(1,l={name:"BYE"})),400&t.$$.dirty&&e(2,c=a[r].winner===i)},[u,l,c,function(){if(null===a[r][0]||null===a[r][1])return;if(!o.reset(r))return;if(i===a[r].winner)return void e(4,a[r].winner=void 0,a);if(e(4,a[r].winner=i,a),0===r)return;let t=r%2,n=t?r-1:r-2;n/=2,e(4,a[n][t?0:1]=a[r][i],a),e(4,a[n].winner=void 0,a)},a,o,s,r,i]}class tt extends G{constructor(t){super(),W(this,t,Z,X,o,{controller:5,channels:6,matchID:7,matches:4,selector:8,focused:0})}}function nt(n){let e,l,c,o,s,r,a,f,d,v,I,y,b,k,q=n[0][n[1]].poll.result[0]+"",x=n[0][n[1]].poll.result[1]+"";return{c(){e=m("pollFrame"),l=m("voteCommands"),l.innerHTML='<voteCommand class="channel1 svelte-1fq0coc">1</voteCommand> \n        <span class="vs svelte-1fq0coc">VS</span> \n        <voteCommand class="channel2 svelte-1fq0coc">2</voteCommand>',c=$(),o=m("results"),s=m("votes"),r=p(q),a=$(),f=m("span"),f.textContent="VOTES",d=$(),v=m("votes"),I=p(x),y=$(),b=m("pollBar"),k=m("resultBar"),g(l,"class","svelte-1fq0coc"),g(s,"class","channel1 svelte-1fq0coc"),g(v,"class","channel2 svelte-1fq0coc"),g(o,"class","svelte-1fq0coc"),w(k,"width",(Number.isNaN(n[2])?50:n[2])+"%"),g(k,"class","svelte-1fq0coc"),g(b,"class","svelte-1fq0coc"),g(e,"class","svelte-1fq0coc")},m(t,n){u(t,e,n),i(e,l),i(e,c),i(e,o),i(o,s),i(s,r),i(o,a),i(o,f),i(o,d),i(o,v),i(v,I),i(e,y),i(e,b),i(b,k)},p(t,[n]){3&n&&q!==(q=t[0][t[1]].poll.result[0]+"")&&D(r,q),3&n&&x!==(x=t[0][t[1]].poll.result[1]+"")&&D(I,x),4&n&&w(k,"width",(Number.isNaN(t[2])?50:t[2])+"%")},i:t,o:t,d(t){t&&h(e)}}}function et(t,n,e){let l,c,o,{controller:s}=n,{matchID:r}=n,{matches:a}=n;return t.$$set=t=>{"controller"in t&&e(3,s=t.controller),"matchID"in t&&e(1,r=t.matchID),"matches"in t&&e(0,a=t.matches)},t.$$.update=()=>{3&t.$$.dirty&&e(2,l=100*a[r].poll.result[0]/(a[r].poll.result[0]+a[r].poll.result[1])),8&t.$$.dirty&&function(t){if(o===t)return;c&&(console.log(c),c.disconnect()),console.log(t),c=new window.tmi.Client({channels:[t.toLowerCase()]}),c.connect().then((()=>console.log("CONNECTED"))),c.on("message",(async(t,n,l,c)=>{a[r].poll.participants.includes(n["user-id"])||("1"===l?e(0,a[r].poll.result[0]++,a):"2"===l&&e(0,a[r].poll.result[1]++,a),a[r].poll.participants.push(n["user-id"]),console.log(l,a[r].poll.participants))})),o=t}(s.settings.twitchChannel.value)},[a,r,l,s]}class lt extends G{constructor(t){super(),W(this,t,et,nt,o,{controller:3,matchID:1,matches:0})}}function ct(t){let n,e,c,o,s,r,a,i,f,p,d,D,I,w,y,b;function k(n){t[5](n)}let q={focused:!0,controller:t[0],channels:t[3],matchID:t[2],selector:1};function M(n){t[6](n)}function C(n){t[7](n)}void 0!==t[1]&&(q.matches=t[1]),c=new tt({props:q}),x.push((()=>z(c,"matches",k)));let L={matchID:t[2]};function j(n){t[8](n)}void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),r=new lt({props:L}),x.push((()=>z(r,"controller",M))),x.push((()=>z(r,"matches",C)));let N={focused:!0,controller:t[0],channels:t[3],matchID:t[2],selector:0};return void 0!==t[1]&&(N.matches=t[1]),p=new tt({props:N}),x.push((()=>z(p,"matches",j))),{c(){n=m("nav"),n.textContent="←",e=$(),J(c.$$.fragment),s=$(),J(r.$$.fragment),f=$(),J(p.$$.fragment),D=$(),I=m("nav"),I.textContent="→",g(n,"class","svelte-1ajga2d"),g(I,"class","svelte-1ajga2d")},m(l,o){u(l,n,o),u(l,e,o),F(c,l,o),u(l,s,o),F(r,l,o),u(l,f,o),F(p,l,o),u(l,D,o),u(l,I,o),w=!0,y||(b=[v(n,"click",t[4]),v(I,"click",t[9])],y=!0)},p(t,n){const e={};1&n&&(e.controller=t[0]),8&n&&(e.channels=t[3]),4&n&&(e.matchID=t[2]),!o&&2&n&&(o=!0,e.matches=t[1],_((()=>o=!1))),c.$set(e);const l={};4&n&&(l.matchID=t[2]),!a&&1&n&&(a=!0,l.controller=t[0],_((()=>a=!1))),!i&&2&n&&(i=!0,l.matches=t[1],_((()=>i=!1))),r.$set(l);const s={};1&n&&(s.controller=t[0]),8&n&&(s.channels=t[3]),4&n&&(s.matchID=t[2]),!d&&2&n&&(d=!0,s.matches=t[1],_((()=>d=!1))),p.$set(s)},i(t){w||(U(c.$$.fragment,t),U(r.$$.fragment,t),U(p.$$.fragment,t),w=!0)},o(t){Y(c.$$.fragment,t),Y(r.$$.fragment,t),Y(p.$$.fragment,t),w=!1},d(t){t&&h(n),t&&h(e),R(c,t),t&&h(s),R(r,t),t&&h(f),R(p,t),t&&h(D),t&&h(I),y=!1,l(b)}}}function ot(t){let n,e,l=t[1]&&ct(t);return{c(){n=m("match"),l&&l.c(),g(n,"class","svelte-1ajga2d")},m(t,c){u(t,n,c),l&&l.m(n,null),e=!0},p(t,[e]){t[1]?l?(l.p(t,e),2&e&&U(l,1)):(l=ct(t),l.c(),U(l,1),l.m(n,null)):l&&(H(),Y(l,1,1,(()=>{l=null})),P())},i(t){e||(U(l),e=!0)},o(t){Y(l),e=!1},d(t){t&&h(n),l&&l.d()}}}function st(t,n,e){let{matchID:l}=n,{controller:c}=n,{channels:o}=n,{matches:s}=n;return t.$$set=t=>{"matchID"in t&&e(2,l=t.matchID),"controller"in t&&e(0,c=t.controller),"channels"in t&&e(3,o=t.channels),"matches"in t&&e(1,s=t.matches)},[c,s,l,o,()=>c.focusMatch(l+1),function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){s=t,e(1,s)},()=>c.focusMatch(l-1)]}class rt extends G{constructor(t){super(),W(this,t,st,ot,o,{matchID:2,controller:0,channels:3,matches:1})}}function at(t){let n,e,l,c,o,s,r,a,f,p,d,v,D,I,w,y,b,k,q;function M(n){t[14](n)}function C(n){t[15](n)}let L={channels:t[2],matchID:t[3],selector:1};function j(n){t[16](n)}function N(n){t[17](n)}void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),o=new tt({props:L}),x.push((()=>z(o,"controller",M))),x.push((()=>z(o,"matches",C)));let B={channels:t[2],matchID:t[3],selector:0};return void 0!==t[0]&&(B.controller=t[0]),void 0!==t[1]&&(B.matches=t[1]),I=new tt({props:B}),x.push((()=>z(I,"controller",j))),x.push((()=>z(I,"matches",N))),{c(){n=m("finalMatch"),e=m("finalChannel"),l=m("verticalLine"),c=$(),J(o.$$.fragment),a=$(),f=m("verticalLine"),p=$(),d=m("finalChannel"),v=m("verticalLine"),D=$(),J(I.$$.fragment),b=$(),k=m("verticalLine"),g(l,"class","final svelte-2gr2t9"),g(f,"class","final placeholder svelte-2gr2t9"),g(e,"class","svelte-2gr2t9"),g(v,"class","final placeholder svelte-2gr2t9"),g(k,"class","final svelte-2gr2t9"),g(d,"class","svelte-2gr2t9"),g(n,"class","svelte-2gr2t9")},m(t,s){u(t,n,s),i(n,e),i(e,l),i(e,c),F(o,e,null),i(e,a),i(e,f),i(n,p),i(n,d),i(d,v),i(d,D),F(I,d,null),i(d,b),i(d,k),q=!0},p(t,n){const e={};4&n&&(e.channels=t[2]),8&n&&(e.matchID=t[3]),!s&&1&n&&(s=!0,e.controller=t[0],_((()=>s=!1))),!r&&2&n&&(r=!0,e.matches=t[1],_((()=>r=!1))),o.$set(e);const l={};4&n&&(l.channels=t[2]),8&n&&(l.matchID=t[3]),!w&&1&n&&(w=!0,l.controller=t[0],_((()=>w=!1))),!y&&2&n&&(y=!0,l.matches=t[1],_((()=>y=!1))),I.$set(l)},i(t){q||(U(o.$$.fragment,t),U(I.$$.fragment,t),q=!0)},o(t){Y(o.$$.fragment,t),Y(I.$$.fragment,t),q=!1},d(t){t&&h(n),R(o),R(I)}}}function it(t){let n,e,l,c,o,s,r,a,f,p,d,v,D=!t[5]&&ht();function I(n){t[10](n)}function w(n){t[11](n)}let b={channels:t[2],matchID:t[3],selector:1};function k(n){t[12](n)}function q(n){t[13](n)}void 0!==t[0]&&(b.controller=t[0]),void 0!==t[1]&&(b.matches=t[1]),l=new tt({props:b}),x.push((()=>z(l,"controller",I))),x.push((()=>z(l,"matches",w)));let M={channels:t[2],matchID:t[3],selector:0};return void 0!==t[0]&&(M.controller=t[0]),void 0!==t[1]&&(M.matches=t[1]),r=new tt({props:M}),x.push((()=>z(r,"controller",k))),x.push((()=>z(r,"matches",q))),{c(){D&&D.c(),n=$(),e=m("channels"),J(l.$$.fragment),s=$(),J(r.$$.fragment),p=$(),d=m("bracketLine"),g(e,"class","left svelte-2gr2t9"),y(e,"leaf",t[5]),g(d,"class","left svelte-2gr2t9")},m(t,c){D&&D.m(t,c),u(t,n,c),u(t,e,c),F(l,e,null),i(e,s),F(r,e,null),u(t,p,c),u(t,d,c),v=!0},p(t,s){t[5]?D&&(D.d(1),D=null):D||(D=ht(),D.c(),D.m(n.parentNode,n));const i={};4&s&&(i.channels=t[2]),8&s&&(i.matchID=t[3]),!c&&1&s&&(c=!0,i.controller=t[0],_((()=>c=!1))),!o&&2&s&&(o=!0,i.matches=t[1],_((()=>o=!1))),l.$set(i);const u={};4&s&&(u.channels=t[2]),8&s&&(u.matchID=t[3]),!a&&1&s&&(a=!0,u.controller=t[0],_((()=>a=!1))),!f&&2&s&&(f=!0,u.matches=t[1],_((()=>f=!1))),r.$set(u),(!v||32&s)&&y(e,"leaf",t[5])},i(t){v||(U(l.$$.fragment,t),U(r.$$.fragment,t),v=!0)},o(t){Y(l.$$.fragment,t),Y(r.$$.fragment,t),v=!1},d(t){D&&D.d(t),t&&h(n),t&&h(e),R(l),R(r),t&&h(p),t&&h(d)}}}function ut(t){let n,e,l,c,o,s,r,a,f,p,v,D,I;function w(n){t[6](n)}function b(n){t[7](n)}let k={channels:t[2],matchID:t[3],selector:1};function q(n){t[8](n)}function M(n){t[9](n)}void 0!==t[0]&&(k.controller=t[0]),void 0!==t[1]&&(k.matches=t[1]),c=new tt({props:k}),x.push((()=>z(c,"controller",w))),x.push((()=>z(c,"matches",b)));let C={channels:t[2],matchID:t[3],selector:0};void 0!==t[0]&&(C.controller=t[0]),void 0!==t[1]&&(C.matches=t[1]),a=new tt({props:C}),x.push((()=>z(a,"controller",q))),x.push((()=>z(a,"matches",M)));let L=!t[5]&&ft();return{c(){n=m("bracketLine"),e=$(),l=m("channels"),J(c.$$.fragment),r=$(),J(a.$$.fragment),v=$(),L&&L.c(),D=d(),g(n,"class","right svelte-2gr2t9"),g(l,"class","right svelte-2gr2t9"),y(l,"leaf",t[5])},m(t,o){u(t,n,o),u(t,e,o),u(t,l,o),F(c,l,null),i(l,r),F(a,l,null),u(t,v,o),L&&L.m(t,o),u(t,D,o),I=!0},p(t,n){const e={};4&n&&(e.channels=t[2]),8&n&&(e.matchID=t[3]),!o&&1&n&&(o=!0,e.controller=t[0],_((()=>o=!1))),!s&&2&n&&(s=!0,e.matches=t[1],_((()=>s=!1))),c.$set(e);const r={};4&n&&(r.channels=t[2]),8&n&&(r.matchID=t[3]),!f&&1&n&&(f=!0,r.controller=t[0],_((()=>f=!1))),!p&&2&n&&(p=!0,r.matches=t[1],_((()=>p=!1))),a.$set(r),(!I||32&n)&&y(l,"leaf",t[5]),t[5]?L&&(L.d(1),L=null):L||(L=ft(),L.c(),L.m(D.parentNode,D))},i(t){I||(U(c.$$.fragment,t),U(a.$$.fragment,t),I=!0)},o(t){Y(c.$$.fragment,t),Y(a.$$.fragment,t),I=!1},d(t){t&&h(n),t&&h(e),t&&h(l),R(c),R(a),t&&h(v),L&&L.d(t),t&&h(D)}}}function ht(t){let n;return{c(){n=m("lines"),n.innerHTML='<verticalLine class="svelte-2gr2t9"></verticalLine> \n                <verticalLine class="svelte-2gr2t9"></verticalLine>',g(n,"class","svelte-2gr2t9")},m(t,e){u(t,n,e)},d(t){t&&h(n)}}}function ft(t){let n;return{c(){n=m("lines"),n.innerHTML='<verticalLine class="svelte-2gr2t9"></verticalLine> \n                <verticalLine class="svelte-2gr2t9"></verticalLine>',g(n,"class","svelte-2gr2t9")},m(t,e){u(t,n,e)},d(t){t&&h(n)}}}function mt(t){let n,e,l,c,o,s;const r=[ut,it,at],a=[];function i(t,n){return"right"===t[4]?0:"left"===t[4]?1:2}return e=i(t),l=a[e]=r[e](t),{c(){n=m("match"),l.c(),g(n,"class","svelte-2gr2t9")},m(l,r){u(l,n,r),a[e].m(n,null),c=!0,o||(s=v(n,"click",t[18]),o=!0)},p(t,[c]){let o=e;e=i(t),e===o?a[e].p(t,c):(H(),Y(a[o],1,1,(()=>{a[o]=null})),P(),l=a[e],l?l.p(t,c):(l=a[e]=r[e](t),l.c()),U(l,1),l.m(n,null))},i(t){c||(U(l),c=!0)},o(t){Y(l),c=!1},d(t){t&&h(n),a[e].d(),o=!1,s()}}}function pt(t,n,e){let{controller:l}=n,{channels:c=null}=n,{matches:o}=n,{matchID:s}=n,{orientation:r}=n,{leaf:a=!1}=n;return t.$$set=t=>{"controller"in t&&e(0,l=t.controller),"channels"in t&&e(2,c=t.channels),"matches"in t&&e(1,o=t.matches),"matchID"in t&&e(3,s=t.matchID),"orientation"in t&&e(4,r=t.orientation),"leaf"in t&&e(5,a=t.leaf)},[l,o,c,s,r,a,function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},()=>l.focusMatch(s)]}class $t extends G{constructor(t){super(),W(this,t,pt,mt,o,{controller:0,channels:2,matches:1,matchID:3,orientation:4,leaf:5})}}function dt(t){let n,e,l,c,o;function s(n){t[25](n)}function r(n){t[26](n)}let a={leaf:!0,orientation:t[6],channels:t[4],matchID:t[3]};return void 0!==t[0]&&(a.controller=t[0]),void 0!==t[1]&&(a.matches=t[1]),e=new $t({props:a}),x.push((()=>z(e,"controller",s))),x.push((()=>z(e,"matches",r))),{c(){n=m("current"),J(e.$$.fragment)},m(t,l){u(t,n,l),F(e,n,null),o=!0},p(t,n){const o={};64&n&&(o.orientation=t[6]),16&n&&(o.channels=t[4]),8&n&&(o.matchID=t[3]),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o)},i(t){o||(U(e.$$.fragment,t),o=!0)},o(t){Y(e.$$.fragment,t),o=!1},d(t){t&&h(n),R(e)}}}function vt(t){let n,e,l,c;const o=[It,Dt],s=[];function r(t,n){return"right"===t[6]?0:1}return n=r(t),e=s[n]=o[n](t),{c(){e.c(),l=d()},m(t,e){s[n].m(t,e),u(t,l,e),c=!0},p(t,c){let a=n;n=r(t),n===a?s[n].p(t,c):(H(),Y(s[a],1,1,(()=>{s[a]=null})),P(),e=s[n],e?e.p(t,c):(e=s[n]=o[n](t),e.c()),U(e,1),e.m(l.parentNode,l))},i(t){c||(U(e),c=!0)},o(t){Y(e),c=!1},d(t){s[n].d(t),t&&h(l)}}}function gt(t){let n,e,l,c,o,s,r,a,i,f,p,d,v,g,D;function I(n){t[7](n)}function w(n){t[8](n)}let y={orientation:"left",level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function b(n){t[9](n)}function k(n){t[10](n)}void 0!==t[0]&&(y.controller=t[0]),void 0!==t[1]&&(y.matches=t[1]),e=new bt({props:y}),x.push((()=>z(e,"controller",I))),x.push((()=>z(e,"matches",w)));let q={orientation:"final",matchID:t[3]};function M(n){t[11](n)}function C(n){t[12](n)}void 0!==t[0]&&(q.controller=t[0]),void 0!==t[1]&&(q.matches=t[1]),r=new $t({props:q}),x.push((()=>z(r,"controller",b))),x.push((()=>z(r,"matches",k)));let L={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+1};return void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),d=new bt({props:L}),x.push((()=>z(d,"controller",M))),x.push((()=>z(d,"matches",C))),{c(){n=m("leftbracket"),J(e.$$.fragment),o=$(),s=m("final"),J(r.$$.fragment),f=$(),p=m("rightbracket"),J(d.$$.fragment)},m(t,l){u(t,n,l),F(e,n,null),u(t,o,l),u(t,s,l),F(r,s,null),u(t,f,l),u(t,p,l),F(d,p,null),D=!0},p(t,n){const o={};4&n&&(o.level=t[2]-1),16&n&&(o.channels=t[4]),8&n&&(o.matchID=2*t[3]+2),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o);const s={};8&n&&(s.matchID=t[3]),!a&&1&n&&(a=!0,s.controller=t[0],_((()=>a=!1))),!i&&2&n&&(i=!0,s.matches=t[1],_((()=>i=!1))),r.$set(s);const u={};4&n&&(u.level=t[2]-1),16&n&&(u.channels=t[4]),8&n&&(u.matchID=2*t[3]+1),!v&&1&n&&(v=!0,u.controller=t[0],_((()=>v=!1))),!g&&2&n&&(g=!0,u.matches=t[1],_((()=>g=!1))),d.$set(u)},i(t){D||(U(e.$$.fragment,t),U(r.$$.fragment,t),U(d.$$.fragment,t),D=!0)},o(t){Y(e.$$.fragment,t),Y(r.$$.fragment,t),Y(d.$$.fragment,t),D=!1},d(t){t&&h(n),R(e),t&&h(o),t&&h(s),R(r),t&&h(f),t&&h(p),R(d)}}}function Dt(t){let n,e,l,c,o,s,r,a,f,p,d,v,g,D;function I(n){t[19](n)}function w(n){t[20](n)}let y={level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function b(n){t[21](n)}function k(n){t[22](n)}void 0!==t[0]&&(y.controller=t[0]),void 0!==t[1]&&(y.matches=t[1]),e=new bt({props:y}),x.push((()=>z(e,"controller",I))),x.push((()=>z(e,"matches",w)));let q={level:t[2]-1,channels:t[4],matchID:2*t[3]+1};function M(n){t[23](n)}function C(n){t[24](n)}void 0!==t[0]&&(q.controller=t[0]),void 0!==t[1]&&(q.matches=t[1]),s=new bt({props:q}),x.push((()=>z(s,"controller",b))),x.push((()=>z(s,"matches",k)));let L={orientation:t[6],channels:t[4],matchID:t[3]};return void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),d=new $t({props:L}),x.push((()=>z(d,"controller",M))),x.push((()=>z(d,"matches",C))),{c(){n=m("previous"),J(e.$$.fragment),o=$(),J(s.$$.fragment),f=$(),p=m("current"),J(d.$$.fragment)},m(t,l){u(t,n,l),F(e,n,null),i(n,o),F(s,n,null),u(t,f,l),u(t,p,l),F(d,p,null),D=!0},p(t,n){const o={};4&n&&(o.level=t[2]-1),16&n&&(o.channels=t[4]),8&n&&(o.matchID=2*t[3]+2),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o);const i={};4&n&&(i.level=t[2]-1),16&n&&(i.channels=t[4]),8&n&&(i.matchID=2*t[3]+1),!r&&1&n&&(r=!0,i.controller=t[0],_((()=>r=!1))),!a&&2&n&&(a=!0,i.matches=t[1],_((()=>a=!1))),s.$set(i);const u={};64&n&&(u.orientation=t[6]),16&n&&(u.channels=t[4]),8&n&&(u.matchID=t[3]),!v&&1&n&&(v=!0,u.controller=t[0],_((()=>v=!1))),!g&&2&n&&(g=!0,u.matches=t[1],_((()=>g=!1))),d.$set(u)},i(t){D||(U(e.$$.fragment,t),U(s.$$.fragment,t),U(d.$$.fragment,t),D=!0)},o(t){Y(e.$$.fragment,t),Y(s.$$.fragment,t),Y(d.$$.fragment,t),D=!1},d(t){t&&h(n),R(e),R(s),t&&h(f),t&&h(p),R(d)}}}function It(t){let n,e,l,c,o,s,r,a,f,p,d,v,g,D;function I(n){t[13](n)}function w(n){t[14](n)}let y={orientation:t[6],channels:t[4],matchID:t[3]};function b(n){t[15](n)}function k(n){t[16](n)}void 0!==t[0]&&(y.controller=t[0]),void 0!==t[1]&&(y.matches=t[1]),e=new $t({props:y}),x.push((()=>z(e,"controller",I))),x.push((()=>z(e,"matches",w)));let q={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function M(n){t[17](n)}function C(n){t[18](n)}void 0!==t[0]&&(q.controller=t[0]),void 0!==t[1]&&(q.matches=t[1]),r=new bt({props:q}),x.push((()=>z(r,"controller",b))),x.push((()=>z(r,"matches",k)));let L={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+1};return void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),d=new bt({props:L}),x.push((()=>z(d,"controller",M))),x.push((()=>z(d,"matches",C))),{c(){n=m("current"),J(e.$$.fragment),o=$(),s=m("previous"),J(r.$$.fragment),p=$(),J(d.$$.fragment)},m(t,l){u(t,n,l),F(e,n,null),u(t,o,l),u(t,s,l),F(r,s,null),i(s,p),F(d,s,null),D=!0},p(t,n){const o={};64&n&&(o.orientation=t[6]),16&n&&(o.channels=t[4]),8&n&&(o.matchID=t[3]),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o);const s={};4&n&&(s.level=t[2]-1),16&n&&(s.channels=t[4]),8&n&&(s.matchID=2*t[3]+2),!a&&1&n&&(a=!0,s.controller=t[0],_((()=>a=!1))),!f&&2&n&&(f=!0,s.matches=t[1],_((()=>f=!1))),r.$set(s);const i={};4&n&&(i.level=t[2]-1),16&n&&(i.channels=t[4]),8&n&&(i.matchID=2*t[3]+1),!v&&1&n&&(v=!0,i.controller=t[0],_((()=>v=!1))),!g&&2&n&&(g=!0,i.matches=t[1],_((()=>g=!1))),d.$set(i)},i(t){D||(U(e.$$.fragment,t),U(r.$$.fragment,t),U(d.$$.fragment,t),D=!0)},o(t){Y(e.$$.fragment,t),Y(r.$$.fragment,t),Y(d.$$.fragment,t),D=!1},d(t){t&&h(n),R(e),t&&h(o),t&&h(s),R(r),R(d)}}}function wt(t){let n,e,l,c;const o=[gt,vt,dt],s=[];function r(t,n){return t[5]?0:0!==t[2]?1:2}return e=r(t),l=s[e]=o[e](t),{c(){n=m("bracket"),l.c(),g(n,"class","svelte-1e3ds4x")},m(t,l){u(t,n,l),s[e].m(n,null),c=!0},p(t,[c]){let a=e;e=r(t),e===a?s[e].p(t,c):(H(),Y(s[a],1,1,(()=>{s[a]=null})),P(),l=s[e],l?l.p(t,c):(l=s[e]=o[e](t),l.c()),U(l,1),l.m(n,null))},i(t){c||(U(l),c=!0)},o(t){Y(l),c=!1},d(t){t&&h(n),s[e].d()}}}function yt(t,n,e){let{controller:l}=n,{level:c=0}=n,{matchID:o=0}=n,{channels:s=null}=n,{matches:r}=n,{final:a=!1}=n,{orientation:i="left"}=n;return t.$$set=t=>{"controller"in t&&e(0,l=t.controller),"level"in t&&e(2,c=t.level),"matchID"in t&&e(3,o=t.matchID),"channels"in t&&e(4,s=t.channels),"matches"in t&&e(1,r=t.matches),"final"in t&&e(5,a=t.final),"orientation"in t&&e(6,i=t.orientation)},[l,r,c,o,s,a,i,function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)}]}class bt extends G{constructor(t){super(),W(this,t,yt,wt,o,{controller:0,level:2,matchID:3,channels:4,matches:1,final:5,orientation:6})}}function kt(t,n,e){const l=t.slice();return l[19]=n[e][0],l[20]=n[e][1],l[21]=n,l[22]=e,l}function qt(t,n,e){const l=t.slice();return l[23]=n[e].name,l[24]=n[e].vidID,l[25]=n,l[22]=e,l}function xt(t){let n,e,c,o,s,r,a,p,d,D,I,w,y,b,k,q,x,M,C,L,j=t[0]&&Mt(t),N=Object.entries(t[1].settings),_=[];for(let n=0;n<N.length;n+=1)_[n]=Lt(kt(t,N,n));return{c(){n=m("dataLabel"),n.textContent="Channels",e=$(),c=m("section"),o=m("formBlock"),j&&j.c(),s=$(),r=m("channel"),a=m("channelButton"),a.textContent="＋",p=$(),d=m("jsonBlock"),D=m("textarea"),I=$(),w=m("dataLabel"),w.textContent="Settings",y=$(),b=m("section"),k=m("formBlock");for(let t=0;t<_.length;t+=1)_[t].c();q=$(),x=m("jsonBlock"),M=m("textarea"),g(n,"class","svelte-1p4ui3q"),g(a,"class","add svelte-1p4ui3q"),g(r,"class","svelte-1p4ui3q"),g(o,"class","svelte-1p4ui3q"),g(D,"class","json svelte-1p4ui3q"),D.value=t[3],g(d,"class","svelte-1p4ui3q"),g(c,"class","svelte-1p4ui3q"),g(w,"class","svelte-1p4ui3q"),g(k,"class","svelte-1p4ui3q"),g(M,"class","json svelte-1p4ui3q"),M.value=t[4],g(x,"class","svelte-1p4ui3q"),g(b,"class","svelte-1p4ui3q")},m(l,h){u(l,n,h),u(l,e,h),u(l,c,h),i(c,o),j&&j.m(o,null),i(o,s),i(o,r),i(r,a),i(c,p),i(c,d),i(d,D),t[14](D),u(l,I,h),u(l,w,h),u(l,y,h),u(l,b,h),i(b,k);for(let t=0;t<_.length;t+=1)_[t].m(k,null);i(b,q),i(b,x),i(x,M),t[17](M),C||(L=[v(a,"click",t[8]),v(D,"input",t[15]),v(M,"input",t[18])],C=!0)},p(t,n){if(t[0]?j?j.p(t,n):(j=Mt(t),j.c(),j.m(o,s)):j&&(j.d(1),j=null),8&n&&(D.value=t[3]),2&n){let e;for(N=Object.entries(t[1].settings),e=0;e<N.length;e+=1){const l=kt(t,N,e);_[e]?_[e].p(l,n):(_[e]=Lt(l),_[e].c(),_[e].m(k,null))}for(;e<_.length;e+=1)_[e].d(1);_.length=N.length}16&n&&(M.value=t[4])},d(o){o&&h(n),o&&h(e),o&&h(c),j&&j.d(),t[14](null),o&&h(I),o&&h(w),o&&h(y),o&&h(b),f(_,o),t[17](null),C=!1,l(L)}}}function Mt(t){let n,e=t[0],l=[];for(let n=0;n<e.length;n+=1)l[n]=Ct(qt(t,e,n));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();n=d()},m(t,e){for(let n=0;n<l.length;n+=1)l[n].m(t,e);u(t,n,e)},p(t,c){if(513&c){let o;for(e=t[0],o=0;o<e.length;o+=1){const s=qt(t,e,o);l[o]?l[o].p(s,c):(l[o]=Ct(s),l[o].c(),l[o].m(n.parentNode,n))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(t){f(l,t),t&&h(n)}}}function Ct(t){let n,e,c,o,s,r,a,f,p;function d(){return t[11](t[22])}function D(){t[12].call(o,t[25],t[22])}function w(){t[13].call(r,t[25],t[22])}return{c(){n=m("channel"),e=m("channelButton"),e.textContent="⌦",c=$(),o=m("input"),s=$(),r=m("input"),a=$(),g(e,"class","delete svelte-1p4ui3q"),g(o,"type","text"),g(o,"class","channel-name svelte-1p4ui3q"),g(r,"type","text"),g(r,"class","video-id svelte-1p4ui3q"),g(n,"class","svelte-1p4ui3q")},m(l,h){u(l,n,h),i(n,e),i(n,c),i(n,o),I(o,t[23]),i(n,s),i(n,r),I(r,t[24]),i(n,a),f||(p=[v(e,"click",d),v(o,"input",D),v(r,"input",w)],f=!0)},p(n,e){t=n,1&e&&o.value!==t[23]&&I(o,t[23]),1&e&&r.value!==t[24]&&I(r,t[24])},d(t){t&&h(n),f=!1,l(p)}}}function Lt(t){let n,e,l,c,o,s,r,a,f,d,I=t[20].name+"";function w(...n){return t[16](t[20],t[21],t[22],...n)}return{c(){n=m("setting"),e=m("settingLabel"),l=p(I),c=p(":"),o=$(),s=m("input"),a=$(),g(e,"class","svelte-1p4ui3q"),g(s,"type","text"),g(s,"class","channel-name svelte-1p4ui3q"),s.value=r=t[20].value},m(t,r){u(t,n,r),i(n,e),i(e,l),i(e,c),i(n,o),i(n,s),i(n,a),f||(d=v(s,"change",w),f=!0)},p(n,e){t=n,2&e&&I!==(I=t[20].name+"")&&D(l,I),2&e&&r!==(r=t[20].value)&&s.value!==r&&(s.value=r)},d(t){t&&h(n),f=!1,d()}}}function jt(n){let e,l,c,o,s,r=n[2]&&xt(n);return{c(){e=m("toggleButton"),e.textContent="▶ Settings",l=$(),c=m("dataInput"),r&&r.c(),g(e,"class","svelte-1p4ui3q"),g(c,"class","svelte-1p4ui3q")},m(t,a){u(t,e,a),u(t,l,a),u(t,c,a),r&&r.m(c,null),o||(s=v(e,"click",n[10]),o=!0)},p(t,[n]){t[2]?r?r.p(t,n):(r=xt(t),r.c(),r.m(c,null)):r&&(r.d(1),r=null)},i:t,o:t,d(t){t&&h(e),t&&h(l),t&&h(c),r&&r.d(),o=!1,s()}}}function Nt(t,n,e){let l,c,o,s,{channels:r}=n,{controller:a}=n,i=!1;function u(t){e(0,r=JSON.parse(t.value))}function h(t){let n=r;e(0,r=[...r.slice(0,t),...r.slice(t+1)]),Math.ceil(Math.log2(r.length))<Math.ceil(Math.log2(r.length+1))&&(a.setUpBracket()||e(0,r=n))}return t.$$set=t=>{"channels"in t&&e(0,r=t.channels),"controller"in t&&e(1,a=t.controller)},t.$$.update=()=>{1&t.$$.dirty&&e(3,l=JSON.stringify(r,null,5)),2&t.$$.dirty&&e(4,c=JSON.stringify(a.settings,null,5))},[r,a,i,l,c,o,s,u,function(){e(0,r=[...r,{name:"",vidID:""}]),Math.ceil(Math.log2(r.length))>Math.ceil(Math.log2(r.length-1))&&(a.setUpBracket()||r.splice(r.length-1))},h,t=>{e(2,i=!i),t.target.innerHTML=i?"▼ Settings":"▶ Settings"},t=>{h(t)},function(t,n){t[n].name=this.value,e(0,r)},function(t,n){t[n].vidID=this.value,e(0,r)},function(t){x[t?"unshift":"push"]((()=>{o=t,e(5,o)}))},()=>{u(o)},(t,n,l,c)=>{e(1,n[l][1].value=c.target.value,a)},function(t){x[t?"unshift":"push"]((()=>{s=t,e(6,s)}))},()=>{u(s)}]}class _t extends G{constructor(t){super(),W(this,t,Nt,jt,o,{channels:0,controller:1})}}function Bt(n){let e;return{c(){e=p("Loading...")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&h(e)}}}function Et(t){let n,e,l,c;function o(n){t[7](n)}function s(n){t[8](n)}let r={final:!0,level:t[1]-1,channels:t[0]};return void 0!==t[4]&&(r.controller=t[4]),void 0!==t[2]&&(r.matches=t[2]),n=new bt({props:r}),x.push((()=>z(n,"controller",o))),x.push((()=>z(n,"matches",s))),{c(){J(n.$$.fragment)},m(t,e){F(n,t,e),c=!0},p(t,c){const o={};2&c&&(o.level=t[1]-1),1&c&&(o.channels=t[0]),!e&&16&c&&(e=!0,o.controller=t[4],_((()=>e=!1))),!l&&4&c&&(l=!0,o.matches=t[2],_((()=>l=!1))),n.$set(o)},i(t){c||(U(n.$$.fragment,t),c=!0)},o(t){Y(n.$$.fragment,t),c=!1},d(t){R(n,t)}}}function Tt(t){let n,e,l,c,o,s,r,a,f,p,d,v,D,I,w,y;function b(n){t[5](n)}function k(n){t[6](n)}let q={matchID:t[3],channels:t[0]};void 0!==t[4]&&(q.controller=t[4]),void 0!==t[2]&&(q.matches=t[2]),s=new rt({props:q}),x.push((()=>z(s,"controller",b))),x.push((()=>z(s,"matches",k)));const M=[Et,Bt],C=[];function L(t,n){return t[2]?0:1}function j(n){t[9](n)}function N(n){t[10](n)}p=L(t),d=C[p]=M[p](t);let B={};return void 0!==t[0]&&(B.channels=t[0]),void 0!==t[4]&&(B.controller=t[4]),D=new _t({props:B}),x.push((()=>z(D,"channels",j))),x.push((()=>z(D,"controller",N))),{c(){n=m("main"),e=m("bracketTitle"),e.textContent="Who is the best Youtuber?",l=$(),c=m("bracketDescription"),c.innerHTML='Type <span class="channel1">&quot;1&quot;</span> or\n\t\t<span class="channel2">&quot;2&quot;</span> in chat, to vote for the current matchup.',o=$(),J(s.$$.fragment),f=$(),d.c(),v=$(),J(D.$$.fragment),g(e,"class","svelte-1u9njku"),g(c,"class","svelte-1u9njku"),g(n,"class","svelte-1u9njku")},m(t,r){u(t,n,r),i(n,e),i(n,l),i(n,c),i(n,o),F(s,n,null),i(n,f),C[p].m(n,null),i(n,v),F(D,n,null),y=!0},p(t,[e]){const l={};8&e&&(l.matchID=t[3]),1&e&&(l.channels=t[0]),!r&&16&e&&(r=!0,l.controller=t[4],_((()=>r=!1))),!a&&4&e&&(a=!0,l.matches=t[2],_((()=>a=!1))),s.$set(l);let c=p;p=L(t),p===c?C[p].p(t,e):(H(),Y(C[c],1,1,(()=>{C[c]=null})),P(),d=C[p],d?d.p(t,e):(d=C[p]=M[p](t),d.c()),U(d,1),d.m(n,v));const o={};!I&&1&e&&(I=!0,o.channels=t[0],_((()=>I=!1))),!w&&16&e&&(w=!0,o.controller=t[4],_((()=>w=!1))),D.$set(o)},i(t){y||(U(s.$$.fragment,t),U(d),U(D.$$.fragment,t),y=!0)},o(t){Y(s.$$.fragment,t),Y(d),Y(D.$$.fragment,t),y=!1},d(t){t&&h(n),R(s),C[p].d(),R(D)}}}function St(t,n){return t<=n?t:null}function Ot(t,n,e){const l=()=>structuredClone({0:null,1:null,winner:void 0,poll:{result:[0,0],participants:[]}});let c,o,s=null,r=null;k((async()=>{const t=await fetch("./channels.json").then((t=>t.json()));e(0,s=await t.channels),a.setUpBracket(!0)}));let a={settings:{twitchChannel:{value:"stanz",name:"Twitch Channel"}},reset:t=>{console.log("RESET",t);let n=!1,l=t;for(;0!==l;){let t=l%2?0:1;if(l=t?(l-2)/2:(l-1)/2,!n&&void 0!==r[l].winner&&(n=confirm("You are about to reset the selected and all dependent matches. Proceed?"),!n))return!1;n&&(e(2,r[l][t]=null,r),e(2,r[l].winner=void 0,r),e(2,r[l].poll={result:[0,0],participants:[]},r))}return!0},focusMatch:t=>{e(3,o=Math.min(Math.max(0,t),r.length-1))},setUpBracket:t=>!(!t&&!confirm("Due to changed data a new bracket has to be calculated, which will reset the current bracket. Proceed?"))&&(e(1,c=Math.ceil(Math.log2(s.length))),e(3,o=2**c-2),e(2,r=function(){let t=function(t){var n=t.length,e=Math.ceil(Math.log(n)/Math.log(2)),l=Math.pow(2,e),c=l-n;if(console.log(`Number of participants: ${n}`),console.log(`Number of rounds: ${e}`),console.log(`Bracket size: ${l}`),console.log(`Required number of byes: ${c}`),n<2)return[];for(var o=[[1,2]],s=1;s<e;s++){for(var r=[],a=Math.pow(2,s+1)+1,i=0;i<o.length;i++){var u=St(o[i][0],n),h=St(a-o[i][0],n);r.push([u,h]),u=St(a-o[i][1],n),h=St(o[i][1],n),r.push([u,h])}o=r}return o}(Array.from({length:s.length},((t,n)=>n+1))),n=[];for(let t=0;t<2**(c-1)-1;t++)n[t]=l();for(let e=0;e<t.length;e++)n[2**(c-1)-1+(t.length-1-e)]={0:t[e][1]-1,1:t[e][0]-1,winner:void 0,poll:{result:[0,0],participants:[]}};return n}()),!0)};return[s,c,r,o,a,function(t){a=t,e(4,a)},function(t){r=t,e(2,r)},function(t){a=t,e(4,a)},function(t){r=t,e(2,r)},function(t){s=t,e(0,s)},function(t){a=t,e(4,a)}]}return new class extends G{constructor(t){super(),W(this,t,Ot,Tt,o,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
