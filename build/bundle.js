var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function c(t){t.forEach(n)}function o(t){return"function"==typeof t}function l(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let r,s;function a(t,n){return r||(r=document.createElement("a")),r.href=n,t===r.href}function i(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function h(t){t.parentNode.removeChild(t)}function m(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function p(){return f(" ")}function $(){return f("")}function d(t,n,e,c){return t.addEventListener(n,e,c),()=>t.removeEventListener(n,e,c)}function v(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function D(t,n,e,c){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,c?"important":"")}function I(t,n,e){t.classList[e?"add":"remove"](n)}function w(t){s=t}function x(t){(function(){if(!s)throw new Error("Function called outside component initialization");return s})().$$.on_mount.push(t)}const y=[],b=[],k=[],L=[],j=Promise.resolve();let C=!1;function _(t){k.push(t)}function M(t){L.push(t)}const N=new Set;let E=0;function T(){const t=s;do{for(;E<y.length;){const t=y[E];E++,w(t),q(t.$$)}for(w(null),y.length=0,E=0;b.length;)b.pop()();for(let t=0;t<k.length;t+=1){const n=k[t];N.has(n)||(N.add(n),n())}k.length=0}while(y.length);for(;L.length;)L.pop()();C=!1,N.clear(),w(t)}function q(t){if(null!==t.fragment){t.update(),c(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(_)}}const B=new Set;let A;function O(){A={r:0,c:[],p:A}}function P(){A.r||c(A.c),A=A.p}function S(t,n){t&&t.i&&(B.delete(t),t.i(n))}function H(t,n,e,c){if(t&&t.o){if(B.has(t))return;B.add(t),A.c.push((()=>{B.delete(t),c&&(e&&t.d(1),c())})),t.o(n)}else c&&c()}function Y(t,n,e){const c=t.$$.props[n];void 0!==c&&(t.$$.bound[c]=e,e(t.$$.ctx[c]))}function z(t){t&&t.c()}function F(t,e,l,r){const{fragment:s,on_mount:a,on_destroy:i,after_update:u}=t.$$;s&&s.m(e,l),r||_((()=>{const e=a.map(n).filter(o);i?i.push(...e):c(e),t.$$.on_mount=[]})),u.forEach(_)}function R(t,n){const e=t.$$;null!==e.fragment&&(c(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function U(t,n){-1===t.$$.dirty[0]&&(y.push(t),C||(C=!0,j.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function V(n,o,l,r,a,i,u,m=[-1]){const f=s;w(n);const p=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(f?f.$$.context:[])),callbacks:e(),dirty:m,skip_bound:!1,root:o.target||f.$$.root};u&&u(p.root);let $=!1;if(p.ctx=l?l(n,o.props||{},((t,e,...c)=>{const o=c.length?c[0]:e;return p.ctx&&a(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),$&&U(n,t)),e})):[],p.update(),$=!0,c(p.before_update),p.fragment=!!r&&r(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(h)}else p.fragment&&p.fragment.c();o.intro&&S(n.$$.fragment),F(n,o.target,o.anchor,o.customElement),T()}w(f)}class W{$destroy(){R(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function G(t){let n,e,c,o,l,r,s,$=t[2].name+"";return{c(){n=m("channel"),e=m("img"),l=p(),r=m("name"),s=f($),v(e,"alt",c=t[2].name+"}"),a(e.src,o=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")||v(e,"src",o),v(e,"class","svelte-10roytx"),I(e,"eliminated",t[3]),v(r,"class","svelte-10roytx"),v(n,"class","svelte-10roytx"),I(n,"winner",t[1])},m(t,c){u(t,n,c),i(n,e),i(n,l),i(n,r),i(r,s)},p(t,l){4&l&&c!==(c=t[2].name+"}")&&v(e,"alt",c),4&l&&!a(e.src,o=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")&&v(e,"src",o),8&l&&I(e,"eliminated",t[3]),4&l&&$!==($=t[2].name+"")&&g(s,$),2&l&&I(n,"winner",t[1])},d(t){t&&h(n)}}}function J(t){let n,e,o,l,r,s,$,D,w,x,y,b,k,L,j=t[2].name+"";return{c(){n=m("channel"),e=m("img"),r=p(),s=m("name"),$=f(j),D=p(),w=m("a"),x=m("img"),v(e,"class","interactive svelte-10roytx"),v(e,"alt",o=t[2].name+"}"),a(e.src,l=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")||v(e,"src",l),I(e,"eliminated",t[3]),v(s,"class","interactive svelte-10roytx"),v(x,"class","logo svelte-10roytx"),v(x,"alt","Youtube logo"),a(x.src,y="yt.svg")||v(x,"src","yt.svg"),v(w,"href",b=`https://www.youtube.com/watch?v=${t[2].vidID}`),v(w,"target","_blank"),v(n,"class","svelte-10roytx"),I(n,"winner",t[1]),I(n,"focused",t[0])},m(c,o){u(c,n,o),i(n,e),i(n,r),i(n,s),i(s,$),i(s,D),i(n,w),i(w,x),k||(L=[d(e,"click",t[4]),d(s,"click",t[4])],k=!0)},p(t,c){4&c&&o!==(o=t[2].name+"}")&&v(e,"alt",o),4&c&&!a(e.src,l=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")&&v(e,"src",l),8&c&&I(e,"eliminated",t[3]),4&c&&j!==(j=t[2].name+"")&&g($,j),4&c&&b!==(b=`https://www.youtube.com/watch?v=${t[2].vidID}`)&&v(w,"href",b),2&c&&I(n,"winner",t[1]),1&c&&I(n,"focused",t[0])},d(t){t&&h(n),k=!1,c(L)}}}function K(n){let e;function c(t,n){return t[0]?J:G}let o=c(n),l=o(n);return{c(){l.c(),e=$()},m(t,n){l.m(t,n),u(t,e,n)},p(t,[n]){o===(o=c(t))&&l?l.p(t,n):(l.d(1),l=o(t),l&&(l.c(),l.m(e.parentNode,e)))},i:t,o:t,d(t){l.d(t),t&&h(e)}}}function Q(t,n,e){let c,o,l,{controller:r}=n,{channels:s=[]}=n,{matchID:a}=n,{matches:i}=n,{selector:u}=n,{focused:h=!1}=n;return t.$$set=t=>{"controller"in t&&e(6,r=t.controller),"channels"in t&&e(7,s=t.channels),"matchID"in t&&e(8,a=t.matchID),"matches"in t&&e(5,i=t.matches),"selector"in t&&e(9,u=t.selector),"focused"in t&&e(0,h=t.focused)},t.$$.update=()=>{928&t.$$.dirty&&(null===i[a][u]?e(2,c={name:"TBD"}):(console.log(s),s[i[a][u]]?e(2,c=s[i[a][u]]):e(2,c={name:"BYE"}))),800&t.$$.dirty&&e(1,o=i[a].winner===u),290&t.$$.dirty&&e(3,l=!o&&void 0!==i[a].winner)},[h,o,c,l,function(){if(null===i[a][0]||null===i[a][1])return;if(!r.reset(a))return;if(u===i[a].winner)return void e(5,i[a].winner=void 0,i);if(e(5,i[a].winner=u,i),0===a)return;let t=a%2,n=t?a-1:a-2;n/=2,e(5,i[n][t?0:1]=i[a][u],i),e(5,i[n].winner=void 0,i)},i,r,s,a,u]}class X extends W{constructor(t){super(),V(this,t,Q,K,l,{controller:6,channels:7,matchID:8,matches:5,selector:9,focused:0})}}function Z(n){let e,c,o,l,r,s,a,$,d,I,w,x,y,b,k=n[0][n[1]].poll.result[0]+"",L=n[0][n[1]].poll.result[1]+"";return{c(){e=m("pollFrame"),c=m("voteCommands"),c.innerHTML='<voteCommand class="channel1 svelte-jr0rpt">1</voteCommand> \n        <span class="vs svelte-jr0rpt">VS</span> \n        <voteCommand class="channel2 svelte-jr0rpt">2</voteCommand>',o=p(),l=m("results"),r=m("votes"),s=f(k),a=p(),$=m("span"),$.textContent="VOTES",d=p(),I=m("votes"),w=f(L),x=p(),y=m("pollBar"),b=m("resultBar"),v(c,"class","svelte-jr0rpt"),v(r,"class","channel1 svelte-jr0rpt"),v(I,"class","channel2 svelte-jr0rpt"),v(l,"class","svelte-jr0rpt"),D(b,"width",(Number.isNaN(n[2])?50:n[2])+"%"),v(b,"class","svelte-jr0rpt"),v(y,"class","svelte-jr0rpt"),v(e,"class","svelte-jr0rpt")},m(t,n){u(t,e,n),i(e,c),i(e,o),i(e,l),i(l,r),i(r,s),i(l,a),i(l,$),i(l,d),i(l,I),i(I,w),i(e,x),i(e,y),i(y,b)},p(t,[n]){3&n&&k!==(k=t[0][t[1]].poll.result[0]+"")&&g(s,k),3&n&&L!==(L=t[0][t[1]].poll.result[1]+"")&&g(w,L),4&n&&D(b,"width",(Number.isNaN(t[2])?50:t[2])+"%")},i:t,o:t,d(t){t&&h(e)}}}function tt(t,n,e){let c,o,l,{controller:r}=n,{matchID:s}=n,{matches:a}=n;return t.$$set=t=>{"controller"in t&&e(3,r=t.controller),"matchID"in t&&e(1,s=t.matchID),"matches"in t&&e(0,a=t.matches)},t.$$.update=()=>{3&t.$$.dirty&&e(2,c=100*a[s].poll.result[0]/(a[s].poll.result[0]+a[s].poll.result[1])),8&t.$$.dirty&&function(t){if(l===t)return;o&&(console.log(o),o.disconnect()),console.log(t),o=new window.tmi.Client({channels:[t.toLowerCase()]}),o.connect().then((()=>console.log("CONNECTED"))),o.on("message",(async(t,n,c,o)=>{a[s].poll.participants.includes(n["user-id"])||("1"===c?e(0,a[s].poll.result[0]++,a):"2"===c&&e(0,a[s].poll.result[1]++,a),a[s].poll.participants.push(n["user-id"]),console.log(c,a[s].poll.participants))})),l=t}(r.settings.twitchChannel.value)},[a,s,c,r]}class nt extends W{constructor(t){super(),V(this,t,tt,Z,l,{controller:3,matchID:1,matches:0})}}function et(t){let n,e,o,l,r,s,a,i,f,$,g,D,I,w,x,y;function k(n){t[5](n)}let L={focused:!0,controller:t[0],channels:t[3],matchID:t[2],selector:1};function j(n){t[6](n)}function C(n){t[7](n)}void 0!==t[1]&&(L.matches=t[1]),o=new X({props:L}),b.push((()=>Y(o,"matches",k)));let _={matchID:t[2]};function N(n){t[8](n)}void 0!==t[0]&&(_.controller=t[0]),void 0!==t[1]&&(_.matches=t[1]),s=new nt({props:_}),b.push((()=>Y(s,"controller",j))),b.push((()=>Y(s,"matches",C)));let E={focused:!0,controller:t[0],channels:t[3],matchID:t[2],selector:0};return void 0!==t[1]&&(E.matches=t[1]),$=new X({props:E}),b.push((()=>Y($,"matches",N))),{c(){n=m("nav"),n.textContent="←",e=p(),z(o.$$.fragment),r=p(),z(s.$$.fragment),f=p(),z($.$$.fragment),D=p(),I=m("nav"),I.textContent="→",v(n,"class","interactive svelte-1msqfhs"),v(I,"class","interactive svelte-1msqfhs")},m(c,l){u(c,n,l),u(c,e,l),F(o,c,l),u(c,r,l),F(s,c,l),u(c,f,l),F($,c,l),u(c,D,l),u(c,I,l),w=!0,x||(y=[d(n,"click",t[4]),d(I,"click",t[9])],x=!0)},p(t,n){const e={};1&n&&(e.controller=t[0]),8&n&&(e.channels=t[3]),4&n&&(e.matchID=t[2]),!l&&2&n&&(l=!0,e.matches=t[1],M((()=>l=!1))),o.$set(e);const c={};4&n&&(c.matchID=t[2]),!a&&1&n&&(a=!0,c.controller=t[0],M((()=>a=!1))),!i&&2&n&&(i=!0,c.matches=t[1],M((()=>i=!1))),s.$set(c);const r={};1&n&&(r.controller=t[0]),8&n&&(r.channels=t[3]),4&n&&(r.matchID=t[2]),!g&&2&n&&(g=!0,r.matches=t[1],M((()=>g=!1))),$.$set(r)},i(t){w||(S(o.$$.fragment,t),S(s.$$.fragment,t),S($.$$.fragment,t),w=!0)},o(t){H(o.$$.fragment,t),H(s.$$.fragment,t),H($.$$.fragment,t),w=!1},d(t){t&&h(n),t&&h(e),R(o,t),t&&h(r),R(s,t),t&&h(f),R($,t),t&&h(D),t&&h(I),x=!1,c(y)}}}function ct(t){let n,e,c=t[1]&&et(t);return{c(){n=m("match"),c&&c.c(),v(n,"class","svelte-1msqfhs")},m(t,o){u(t,n,o),c&&c.m(n,null),e=!0},p(t,[e]){t[1]?c?(c.p(t,e),2&e&&S(c,1)):(c=et(t),c.c(),S(c,1),c.m(n,null)):c&&(O(),H(c,1,1,(()=>{c=null})),P())},i(t){e||(S(c),e=!0)},o(t){H(c),e=!1},d(t){t&&h(n),c&&c.d()}}}function ot(t,n,e){let{matchID:c}=n,{controller:o}=n,{channels:l}=n,{matches:r}=n;return t.$$set=t=>{"matchID"in t&&e(2,c=t.matchID),"controller"in t&&e(0,o=t.controller),"channels"in t&&e(3,l=t.channels),"matches"in t&&e(1,r=t.matches)},[o,r,c,l,()=>o.focusMatch(c+1),function(t){r=t,e(1,r)},function(t){o=t,e(0,o)},function(t){r=t,e(1,r)},function(t){r=t,e(1,r)},()=>o.focusMatch(c-1)]}class lt extends W{constructor(t){super(),V(this,t,ot,ct,l,{matchID:2,controller:0,channels:3,matches:1})}}function rt(t){let n,e,c,o,l,r,s,a,f,$,d,g,D,I,w,x,y,k,L;function j(n){t[14](n)}function C(n){t[15](n)}let _={channels:t[2],matchID:t[3],selector:1};function N(n){t[16](n)}function E(n){t[17](n)}void 0!==t[0]&&(_.controller=t[0]),void 0!==t[1]&&(_.matches=t[1]),l=new X({props:_}),b.push((()=>Y(l,"controller",j))),b.push((()=>Y(l,"matches",C)));let T={channels:t[2],matchID:t[3],selector:0};return void 0!==t[0]&&(T.controller=t[0]),void 0!==t[1]&&(T.matches=t[1]),I=new X({props:T}),b.push((()=>Y(I,"controller",N))),b.push((()=>Y(I,"matches",E))),{c(){n=m("finalMatch"),e=m("finalChannel"),c=m("verticalLine"),o=p(),z(l.$$.fragment),a=p(),f=m("verticalLine"),$=p(),d=m("finalChannel"),g=m("verticalLine"),D=p(),z(I.$$.fragment),y=p(),k=m("verticalLine"),v(c,"class","final svelte-tnttx0"),v(f,"class","final placeholder svelte-tnttx0"),v(e,"class","svelte-tnttx0"),v(g,"class","final placeholder svelte-tnttx0"),v(k,"class","final svelte-tnttx0"),v(d,"class","svelte-tnttx0"),v(n,"class","svelte-tnttx0")},m(t,r){u(t,n,r),i(n,e),i(e,c),i(e,o),F(l,e,null),i(e,a),i(e,f),i(n,$),i(n,d),i(d,g),i(d,D),F(I,d,null),i(d,y),i(d,k),L=!0},p(t,n){const e={};4&n&&(e.channels=t[2]),8&n&&(e.matchID=t[3]),!r&&1&n&&(r=!0,e.controller=t[0],M((()=>r=!1))),!s&&2&n&&(s=!0,e.matches=t[1],M((()=>s=!1))),l.$set(e);const c={};4&n&&(c.channels=t[2]),8&n&&(c.matchID=t[3]),!w&&1&n&&(w=!0,c.controller=t[0],M((()=>w=!1))),!x&&2&n&&(x=!0,c.matches=t[1],M((()=>x=!1))),I.$set(c)},i(t){L||(S(l.$$.fragment,t),S(I.$$.fragment,t),L=!0)},o(t){H(l.$$.fragment,t),H(I.$$.fragment,t),L=!1},d(t){t&&h(n),R(l),R(I)}}}function st(t){let n,e,c,o,l,r,s,a,f,$,d,g,D=!t[5]&&it();function w(n){t[10](n)}function x(n){t[11](n)}let y={channels:t[2],matchID:t[3],selector:1};function k(n){t[12](n)}function L(n){t[13](n)}void 0!==t[0]&&(y.controller=t[0]),void 0!==t[1]&&(y.matches=t[1]),c=new X({props:y}),b.push((()=>Y(c,"controller",w))),b.push((()=>Y(c,"matches",x)));let j={channels:t[2],matchID:t[3],selector:0};return void 0!==t[0]&&(j.controller=t[0]),void 0!==t[1]&&(j.matches=t[1]),s=new X({props:j}),b.push((()=>Y(s,"controller",k))),b.push((()=>Y(s,"matches",L))),{c(){D&&D.c(),n=p(),e=m("channels"),z(c.$$.fragment),r=p(),z(s.$$.fragment),$=p(),d=m("bracketLine"),v(e,"class","left svelte-tnttx0"),I(e,"leaf",t[5]),v(d,"class","left svelte-tnttx0")},m(t,o){D&&D.m(t,o),u(t,n,o),u(t,e,o),F(c,e,null),i(e,r),F(s,e,null),u(t,$,o),u(t,d,o),g=!0},p(t,r){t[5]?D&&(D.d(1),D=null):D||(D=it(),D.c(),D.m(n.parentNode,n));const i={};4&r&&(i.channels=t[2]),8&r&&(i.matchID=t[3]),!o&&1&r&&(o=!0,i.controller=t[0],M((()=>o=!1))),!l&&2&r&&(l=!0,i.matches=t[1],M((()=>l=!1))),c.$set(i);const u={};4&r&&(u.channels=t[2]),8&r&&(u.matchID=t[3]),!a&&1&r&&(a=!0,u.controller=t[0],M((()=>a=!1))),!f&&2&r&&(f=!0,u.matches=t[1],M((()=>f=!1))),s.$set(u),(!g||32&r)&&I(e,"leaf",t[5])},i(t){g||(S(c.$$.fragment,t),S(s.$$.fragment,t),g=!0)},o(t){H(c.$$.fragment,t),H(s.$$.fragment,t),g=!1},d(t){D&&D.d(t),t&&h(n),t&&h(e),R(c),R(s),t&&h($),t&&h(d)}}}function at(t){let n,e,c,o,l,r,s,a,f,d,g,D,w;function x(n){t[6](n)}function y(n){t[7](n)}let k={channels:t[2],matchID:t[3],selector:1};function L(n){t[8](n)}function j(n){t[9](n)}void 0!==t[0]&&(k.controller=t[0]),void 0!==t[1]&&(k.matches=t[1]),o=new X({props:k}),b.push((()=>Y(o,"controller",x))),b.push((()=>Y(o,"matches",y)));let C={channels:t[2],matchID:t[3],selector:0};void 0!==t[0]&&(C.controller=t[0]),void 0!==t[1]&&(C.matches=t[1]),a=new X({props:C}),b.push((()=>Y(a,"controller",L))),b.push((()=>Y(a,"matches",j)));let _=!t[5]&&ut();return{c(){n=m("bracketLine"),e=p(),c=m("channels"),z(o.$$.fragment),s=p(),z(a.$$.fragment),g=p(),_&&_.c(),D=$(),v(n,"class","right svelte-tnttx0"),v(c,"class","right svelte-tnttx0"),I(c,"leaf",t[5])},m(t,l){u(t,n,l),u(t,e,l),u(t,c,l),F(o,c,null),i(c,s),F(a,c,null),u(t,g,l),_&&_.m(t,l),u(t,D,l),w=!0},p(t,n){const e={};4&n&&(e.channels=t[2]),8&n&&(e.matchID=t[3]),!l&&1&n&&(l=!0,e.controller=t[0],M((()=>l=!1))),!r&&2&n&&(r=!0,e.matches=t[1],M((()=>r=!1))),o.$set(e);const s={};4&n&&(s.channels=t[2]),8&n&&(s.matchID=t[3]),!f&&1&n&&(f=!0,s.controller=t[0],M((()=>f=!1))),!d&&2&n&&(d=!0,s.matches=t[1],M((()=>d=!1))),a.$set(s),(!w||32&n)&&I(c,"leaf",t[5]),t[5]?_&&(_.d(1),_=null):_||(_=ut(),_.c(),_.m(D.parentNode,D))},i(t){w||(S(o.$$.fragment,t),S(a.$$.fragment,t),w=!0)},o(t){H(o.$$.fragment,t),H(a.$$.fragment,t),w=!1},d(t){t&&h(n),t&&h(e),t&&h(c),R(o),R(a),t&&h(g),_&&_.d(t),t&&h(D)}}}function it(t){let n;return{c(){n=m("lines"),n.innerHTML='<verticalLine class="svelte-tnttx0"></verticalLine> \n                <verticalLine class="svelte-tnttx0"></verticalLine>',v(n,"class","svelte-tnttx0")},m(t,e){u(t,n,e)},d(t){t&&h(n)}}}function ut(t){let n;return{c(){n=m("lines"),n.innerHTML='<verticalLine class="svelte-tnttx0"></verticalLine> \n                <verticalLine class="svelte-tnttx0"></verticalLine>',v(n,"class","svelte-tnttx0")},m(t,e){u(t,n,e)},d(t){t&&h(n)}}}function ht(t){let n,e,c,o,l,r;const s=[at,st,rt],a=[];function i(t,n){return"right"===t[4]?0:"left"===t[4]?1:2}return e=i(t),c=a[e]=s[e](t),{c(){n=m("match"),c.c(),v(n,"class","svelte-tnttx0")},m(c,s){u(c,n,s),a[e].m(n,null),o=!0,l||(r=d(n,"click",t[18]),l=!0)},p(t,[o]){let l=e;e=i(t),e===l?a[e].p(t,o):(O(),H(a[l],1,1,(()=>{a[l]=null})),P(),c=a[e],c?c.p(t,o):(c=a[e]=s[e](t),c.c()),S(c,1),c.m(n,null))},i(t){o||(S(c),o=!0)},o(t){H(c),o=!1},d(t){t&&h(n),a[e].d(),l=!1,r()}}}function mt(t,n,e){let{controller:c}=n,{channels:o=null}=n,{matches:l}=n,{matchID:r}=n,{orientation:s}=n,{leaf:a=!1}=n;return t.$$set=t=>{"controller"in t&&e(0,c=t.controller),"channels"in t&&e(2,o=t.channels),"matches"in t&&e(1,l=t.matches),"matchID"in t&&e(3,r=t.matchID),"orientation"in t&&e(4,s=t.orientation),"leaf"in t&&e(5,a=t.leaf)},[c,l,o,r,s,a,function(t){c=t,e(0,c)},function(t){l=t,e(1,l)},function(t){c=t,e(0,c)},function(t){l=t,e(1,l)},function(t){c=t,e(0,c)},function(t){l=t,e(1,l)},function(t){c=t,e(0,c)},function(t){l=t,e(1,l)},function(t){c=t,e(0,c)},function(t){l=t,e(1,l)},function(t){c=t,e(0,c)},function(t){l=t,e(1,l)},()=>c.focusMatch(r)]}class ft extends W{constructor(t){super(),V(this,t,mt,ht,l,{controller:0,channels:2,matches:1,matchID:3,orientation:4,leaf:5})}}function pt(t){let n,e,c,o,l;function r(n){t[25](n)}function s(n){t[26](n)}let a={leaf:!0,orientation:t[6],channels:t[4],matchID:t[3]};return void 0!==t[0]&&(a.controller=t[0]),void 0!==t[1]&&(a.matches=t[1]),e=new ft({props:a}),b.push((()=>Y(e,"controller",r))),b.push((()=>Y(e,"matches",s))),{c(){n=m("current"),z(e.$$.fragment)},m(t,c){u(t,n,c),F(e,n,null),l=!0},p(t,n){const l={};64&n&&(l.orientation=t[6]),16&n&&(l.channels=t[4]),8&n&&(l.matchID=t[3]),!c&&1&n&&(c=!0,l.controller=t[0],M((()=>c=!1))),!o&&2&n&&(o=!0,l.matches=t[1],M((()=>o=!1))),e.$set(l)},i(t){l||(S(e.$$.fragment,t),l=!0)},o(t){H(e.$$.fragment,t),l=!1},d(t){t&&h(n),R(e)}}}function $t(t){let n,e,c,o;const l=[gt,vt],r=[];function s(t,n){return"right"===t[6]?0:1}return n=s(t),e=r[n]=l[n](t),{c(){e.c(),c=$()},m(t,e){r[n].m(t,e),u(t,c,e),o=!0},p(t,o){let a=n;n=s(t),n===a?r[n].p(t,o):(O(),H(r[a],1,1,(()=>{r[a]=null})),P(),e=r[n],e?e.p(t,o):(e=r[n]=l[n](t),e.c()),S(e,1),e.m(c.parentNode,c))},i(t){o||(S(e),o=!0)},o(t){H(e),o=!1},d(t){r[n].d(t),t&&h(c)}}}function dt(t){let n,e,c,o,l,r,s,a,i,f,$,d,v,g,D;function I(n){t[7](n)}function w(n){t[8](n)}let x={orientation:"left",level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function y(n){t[9](n)}function k(n){t[10](n)}void 0!==t[0]&&(x.controller=t[0]),void 0!==t[1]&&(x.matches=t[1]),e=new wt({props:x}),b.push((()=>Y(e,"controller",I))),b.push((()=>Y(e,"matches",w)));let L={orientation:"final",channels:t[4],matchID:t[3]};function j(n){t[11](n)}function C(n){t[12](n)}void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),s=new ft({props:L}),b.push((()=>Y(s,"controller",y))),b.push((()=>Y(s,"matches",k)));let _={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+1};return void 0!==t[0]&&(_.controller=t[0]),void 0!==t[1]&&(_.matches=t[1]),d=new wt({props:_}),b.push((()=>Y(d,"controller",j))),b.push((()=>Y(d,"matches",C))),{c(){n=m("leftbracket"),z(e.$$.fragment),l=p(),r=m("final"),z(s.$$.fragment),f=p(),$=m("rightbracket"),z(d.$$.fragment)},m(t,c){u(t,n,c),F(e,n,null),u(t,l,c),u(t,r,c),F(s,r,null),u(t,f,c),u(t,$,c),F(d,$,null),D=!0},p(t,n){const l={};4&n&&(l.level=t[2]-1),16&n&&(l.channels=t[4]),8&n&&(l.matchID=2*t[3]+2),!c&&1&n&&(c=!0,l.controller=t[0],M((()=>c=!1))),!o&&2&n&&(o=!0,l.matches=t[1],M((()=>o=!1))),e.$set(l);const r={};16&n&&(r.channels=t[4]),8&n&&(r.matchID=t[3]),!a&&1&n&&(a=!0,r.controller=t[0],M((()=>a=!1))),!i&&2&n&&(i=!0,r.matches=t[1],M((()=>i=!1))),s.$set(r);const u={};4&n&&(u.level=t[2]-1),16&n&&(u.channels=t[4]),8&n&&(u.matchID=2*t[3]+1),!v&&1&n&&(v=!0,u.controller=t[0],M((()=>v=!1))),!g&&2&n&&(g=!0,u.matches=t[1],M((()=>g=!1))),d.$set(u)},i(t){D||(S(e.$$.fragment,t),S(s.$$.fragment,t),S(d.$$.fragment,t),D=!0)},o(t){H(e.$$.fragment,t),H(s.$$.fragment,t),H(d.$$.fragment,t),D=!1},d(t){t&&h(n),R(e),t&&h(l),t&&h(r),R(s),t&&h(f),t&&h($),R(d)}}}function vt(t){let n,e,c,o,l,r,s,a,f,$,d,v,g,D;function I(n){t[19](n)}function w(n){t[20](n)}let x={level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function y(n){t[21](n)}function k(n){t[22](n)}void 0!==t[0]&&(x.controller=t[0]),void 0!==t[1]&&(x.matches=t[1]),e=new wt({props:x}),b.push((()=>Y(e,"controller",I))),b.push((()=>Y(e,"matches",w)));let L={level:t[2]-1,channels:t[4],matchID:2*t[3]+1};function j(n){t[23](n)}function C(n){t[24](n)}void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),r=new wt({props:L}),b.push((()=>Y(r,"controller",y))),b.push((()=>Y(r,"matches",k)));let _={orientation:t[6],channels:t[4],matchID:t[3]};return void 0!==t[0]&&(_.controller=t[0]),void 0!==t[1]&&(_.matches=t[1]),d=new ft({props:_}),b.push((()=>Y(d,"controller",j))),b.push((()=>Y(d,"matches",C))),{c(){n=m("previous"),z(e.$$.fragment),l=p(),z(r.$$.fragment),f=p(),$=m("current"),z(d.$$.fragment)},m(t,c){u(t,n,c),F(e,n,null),i(n,l),F(r,n,null),u(t,f,c),u(t,$,c),F(d,$,null),D=!0},p(t,n){const l={};4&n&&(l.level=t[2]-1),16&n&&(l.channels=t[4]),8&n&&(l.matchID=2*t[3]+2),!c&&1&n&&(c=!0,l.controller=t[0],M((()=>c=!1))),!o&&2&n&&(o=!0,l.matches=t[1],M((()=>o=!1))),e.$set(l);const i={};4&n&&(i.level=t[2]-1),16&n&&(i.channels=t[4]),8&n&&(i.matchID=2*t[3]+1),!s&&1&n&&(s=!0,i.controller=t[0],M((()=>s=!1))),!a&&2&n&&(a=!0,i.matches=t[1],M((()=>a=!1))),r.$set(i);const u={};64&n&&(u.orientation=t[6]),16&n&&(u.channels=t[4]),8&n&&(u.matchID=t[3]),!v&&1&n&&(v=!0,u.controller=t[0],M((()=>v=!1))),!g&&2&n&&(g=!0,u.matches=t[1],M((()=>g=!1))),d.$set(u)},i(t){D||(S(e.$$.fragment,t),S(r.$$.fragment,t),S(d.$$.fragment,t),D=!0)},o(t){H(e.$$.fragment,t),H(r.$$.fragment,t),H(d.$$.fragment,t),D=!1},d(t){t&&h(n),R(e),R(r),t&&h(f),t&&h($),R(d)}}}function gt(t){let n,e,c,o,l,r,s,a,f,$,d,v,g,D;function I(n){t[13](n)}function w(n){t[14](n)}let x={orientation:t[6],channels:t[4],matchID:t[3]};function y(n){t[15](n)}function k(n){t[16](n)}void 0!==t[0]&&(x.controller=t[0]),void 0!==t[1]&&(x.matches=t[1]),e=new ft({props:x}),b.push((()=>Y(e,"controller",I))),b.push((()=>Y(e,"matches",w)));let L={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function j(n){t[17](n)}function C(n){t[18](n)}void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),s=new wt({props:L}),b.push((()=>Y(s,"controller",y))),b.push((()=>Y(s,"matches",k)));let _={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+1};return void 0!==t[0]&&(_.controller=t[0]),void 0!==t[1]&&(_.matches=t[1]),d=new wt({props:_}),b.push((()=>Y(d,"controller",j))),b.push((()=>Y(d,"matches",C))),{c(){n=m("current"),z(e.$$.fragment),l=p(),r=m("previous"),z(s.$$.fragment),$=p(),z(d.$$.fragment)},m(t,c){u(t,n,c),F(e,n,null),u(t,l,c),u(t,r,c),F(s,r,null),i(r,$),F(d,r,null),D=!0},p(t,n){const l={};64&n&&(l.orientation=t[6]),16&n&&(l.channels=t[4]),8&n&&(l.matchID=t[3]),!c&&1&n&&(c=!0,l.controller=t[0],M((()=>c=!1))),!o&&2&n&&(o=!0,l.matches=t[1],M((()=>o=!1))),e.$set(l);const r={};4&n&&(r.level=t[2]-1),16&n&&(r.channels=t[4]),8&n&&(r.matchID=2*t[3]+2),!a&&1&n&&(a=!0,r.controller=t[0],M((()=>a=!1))),!f&&2&n&&(f=!0,r.matches=t[1],M((()=>f=!1))),s.$set(r);const i={};4&n&&(i.level=t[2]-1),16&n&&(i.channels=t[4]),8&n&&(i.matchID=2*t[3]+1),!v&&1&n&&(v=!0,i.controller=t[0],M((()=>v=!1))),!g&&2&n&&(g=!0,i.matches=t[1],M((()=>g=!1))),d.$set(i)},i(t){D||(S(e.$$.fragment,t),S(s.$$.fragment,t),S(d.$$.fragment,t),D=!0)},o(t){H(e.$$.fragment,t),H(s.$$.fragment,t),H(d.$$.fragment,t),D=!1},d(t){t&&h(n),R(e),t&&h(l),t&&h(r),R(s),R(d)}}}function Dt(t){let n,e,c,o;const l=[dt,$t,pt],r=[];function s(t,n){return t[5]?0:0!==t[2]?1:2}return e=s(t),c=r[e]=l[e](t),{c(){n=m("bracket"),c.c(),v(n,"class","interactive svelte-1e3ds4x")},m(t,c){u(t,n,c),r[e].m(n,null),o=!0},p(t,[o]){let a=e;e=s(t),e===a?r[e].p(t,o):(O(),H(r[a],1,1,(()=>{r[a]=null})),P(),c=r[e],c?c.p(t,o):(c=r[e]=l[e](t),c.c()),S(c,1),c.m(n,null))},i(t){o||(S(c),o=!0)},o(t){H(c),o=!1},d(t){t&&h(n),r[e].d()}}}function It(t,n,e){let{controller:c}=n,{level:o=0}=n,{matchID:l=0}=n,{channels:r=null}=n,{matches:s}=n,{final:a=!1}=n,{orientation:i="left"}=n;return t.$$set=t=>{"controller"in t&&e(0,c=t.controller),"level"in t&&e(2,o=t.level),"matchID"in t&&e(3,l=t.matchID),"channels"in t&&e(4,r=t.channels),"matches"in t&&e(1,s=t.matches),"final"in t&&e(5,a=t.final),"orientation"in t&&e(6,i=t.orientation)},[c,s,o,l,r,a,i,function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)}]}class wt extends W{constructor(t){super(),V(this,t,It,Dt,l,{controller:0,level:2,matchID:3,channels:4,matches:1,final:5,orientation:6})}}function xt(n){let e;return{c(){e=f("Loading...")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&h(e)}}}function yt(t){let n,e,c,o;function l(n){t[7](n)}function r(n){t[8](n)}let s={final:!0,level:t[1]-1,channels:t[0]};return void 0!==t[4]&&(s.controller=t[4]),void 0!==t[2]&&(s.matches=t[2]),n=new wt({props:s}),b.push((()=>Y(n,"controller",l))),b.push((()=>Y(n,"matches",r))),{c(){z(n.$$.fragment)},m(t,e){F(n,t,e),o=!0},p(t,o){const l={};2&o&&(l.level=t[1]-1),1&o&&(l.channels=t[0]),!e&&16&o&&(e=!0,l.controller=t[4],M((()=>e=!1))),!c&&4&o&&(c=!0,l.matches=t[2],M((()=>c=!1))),n.$set(l)},i(t){o||(S(n.$$.fragment,t),o=!0)},o(t){H(n.$$.fragment,t),o=!1},d(t){R(n,t)}}}function bt(t){let n,e,c,o,l,r,s,a,f,$,d,g;function D(n){t[5](n)}function I(n){t[6](n)}let w={matchID:t[3],channels:t[0]};void 0!==t[4]&&(w.controller=t[4]),void 0!==t[2]&&(w.matches=t[2]),r=new lt({props:w}),b.push((()=>Y(r,"controller",D))),b.push((()=>Y(r,"matches",I)));const x=[yt,xt],y=[];function k(t,n){return t[2]?0:1}return $=k(t),d=y[$]=x[$](t),{c(){n=m("main"),e=m("bracketTitle"),e.textContent="Who is the best Youtuber?",c=p(),o=m("bracketDescription"),o.innerHTML='Type <span class="channel1">&quot;1&quot;</span> or\n\t\t<span class="channel2">&quot;2&quot;</span> in chat, to vote for the current matchup.',l=p(),z(r.$$.fragment),f=p(),d.c(),v(e,"class","svelte-1bcjdtp"),v(o,"class","svelte-1bcjdtp"),v(n,"class","svelte-1bcjdtp")},m(t,s){u(t,n,s),i(n,e),i(n,c),i(n,o),i(n,l),F(r,n,null),i(n,f),y[$].m(n,null),g=!0},p(t,[e]){const c={};8&e&&(c.matchID=t[3]),1&e&&(c.channels=t[0]),!s&&16&e&&(s=!0,c.controller=t[4],M((()=>s=!1))),!a&&4&e&&(a=!0,c.matches=t[2],M((()=>a=!1))),r.$set(c);let o=$;$=k(t),$===o?y[$].p(t,e):(O(),H(y[o],1,1,(()=>{y[o]=null})),P(),d=y[$],d?d.p(t,e):(d=y[$]=x[$](t),d.c()),S(d,1),d.m(n,null))},i(t){g||(S(r.$$.fragment,t),S(d),g=!0)},o(t){H(r.$$.fragment,t),H(d),g=!1},d(t){t&&h(n),R(r),y[$].d()}}}function kt(t,n){return t<=n?t:null}function Lt(t,n,e){const c=()=>structuredClone({0:null,1:null,winner:void 0,poll:{result:[0,0],participants:[]}});let o,l,r=null,s=null;x((async()=>{const t=await fetch("./channels.json").then((t=>t.json()));e(0,r=await t.channels),a.setUpBracket(!0)}));let a={settings:{twitchChannel:{value:"stanz",name:"Twitch Channel"}},reset:t=>{console.log("RESET",t);let n=!1,c=t;for(;0!==c;){let t=c%2?0:1;if(c=t?(c-2)/2:(c-1)/2,!n&&void 0!==s[c].winner&&(n=confirm("You are about to reset the selected and all dependent matches. Proceed?"),!n))return!1;n&&(e(2,s[c][t]=null,s),e(2,s[c].winner=void 0,s),e(2,s[c].poll={result:[0,0],participants:[]},s))}return!0},focusMatch:t=>{e(3,l=Math.min(Math.max(0,t),s.length-1))},setUpBracket:t=>!(!t&&!confirm("Due to changed data a new bracket has to be calculated, which will reset the current bracket. Proceed?"))&&(e(1,o=Math.ceil(Math.log2(r.length))),e(3,l=2**o-2),e(2,s=function(){let t=function(t){var n=t.length,e=Math.ceil(Math.log(n)/Math.log(2)),c=Math.pow(2,e),o=c-n;if(console.log(`Number of participants: ${n}`),console.log(`Number of rounds: ${e}`),console.log(`Bracket size: ${c}`),console.log(`Required number of byes: ${o}`),n<2)return[];for(var l=[[1,2]],r=1;r<e;r++){for(var s=[],a=Math.pow(2,r+1)+1,i=0;i<l.length;i++){var u=kt(l[i][0],n),h=kt(a-l[i][0],n);s.push([u,h]),u=kt(a-l[i][1],n),h=kt(l[i][1],n),s.push([u,h])}l=s}return l}(Array.from({length:r.length},((t,n)=>n+1))),n=[];for(let t=0;t<2**(o-1)-1;t++)n[t]=c();for(let e=0;e<t.length;e++)n[2**(o-1)-1+(t.length-1-e)]={0:t[e][1]-1,1:t[e][0]-1,winner:void 0,poll:{result:[0,0],participants:[]}};return n}()),!0)};return[r,o,s,l,a,function(t){a=t,e(4,a)},function(t){s=t,e(2,s)},function(t){a=t,e(4,a)},function(t){s=t,e(2,s)}]}return new class extends W{constructor(t){super(),V(this,t,Lt,bt,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
