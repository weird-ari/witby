var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function l(t){t.forEach(n)}function c(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}let s,r;function a(t,n){return s||(s=document.createElement("a")),s.href=n,t===s.href}function i(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function h(t){t.parentNode.removeChild(t)}function f(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function m(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function d(){return p(" ")}function $(){return p("")}function g(t,n,e,l){return t.addEventListener(n,e,l),()=>t.removeEventListener(n,e,l)}function v(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function I(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function D(t,n){t.value=null==n?"":n}function w(t,n,e,l){null===e?t.style.removeProperty(n):t.style.setProperty(n,e,l?"important":"")}function x(t,n,e){t.classList[e?"add":"remove"](n)}function y(t){r=t}function b(t){(function(){if(!r)throw new Error("Function called outside component initialization");return r})().$$.on_mount.push(t)}const k=[],C=[],M=[],j=[],L=Promise.resolve();let N=!1;function B(t){M.push(t)}function _(t){j.push(t)}const S=new Set;let E=0;function T(){const t=r;do{for(;E<k.length;){const t=k[E];E++,y(t),O(t.$$)}for(y(null),k.length=0,E=0;C.length;)C.pop()();for(let t=0;t<M.length;t+=1){const n=M[t];S.has(n)||(S.add(n),n())}M.length=0}while(k.length);for(;j.length;)j.pop()();N=!1,S.clear(),y(t)}function O(t){if(null!==t.fragment){t.update(),l(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(B)}}const U=new Set;let z;function A(){z={r:0,c:[],p:z}}function q(){z.r||l(z.c),z=z.p}function H(t,n){t&&t.i&&(U.delete(t),t.i(n))}function P(t,n,e,l){if(t&&t.o){if(U.has(t))return;U.add(t),z.c.push((()=>{U.delete(t),l&&(e&&t.d(1),l())})),t.o(n)}else l&&l()}function R(t,n,e){const l=t.$$.props[n];void 0!==l&&(t.$$.bound[l]=e,e(t.$$.ctx[l]))}function Y(t){t&&t.c()}function J(t,e,o,s){const{fragment:r,on_mount:a,on_destroy:i,after_update:u}=t.$$;r&&r.m(e,o),s||B((()=>{const e=a.map(n).filter(c);i?i.push(...e):l(e),t.$$.on_mount=[]})),u.forEach(B)}function V(t,n){const e=t.$$;null!==e.fragment&&(l(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function W(t,n){-1===t.$$.dirty[0]&&(k.push(t),N||(N=!0,L.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function F(n,c,o,s,a,i,u,f=[-1]){const m=r;y(n);const p=n.$$={fragment:null,ctx:null,props:i,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(m?m.$$.context:[])),callbacks:e(),dirty:f,skip_bound:!1,root:c.target||m.$$.root};u&&u(p.root);let d=!1;if(p.ctx=o?o(n,c.props||{},((t,e,...l)=>{const c=l.length?l[0]:e;return p.ctx&&a(p.ctx[t],p.ctx[t]=c)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](c),d&&W(n,t)),e})):[],p.update(),d=!0,l(p.before_update),p.fragment=!!s&&s(p.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);p.fragment&&p.fragment.l(t),t.forEach(h)}else p.fragment&&p.fragment.c();c.intro&&H(n.$$.fragment),J(n,c.target,c.anchor,c.customElement),T()}y(m)}class G{$destroy(){V(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(t){let n,e,l,c,o,s,r,f=t[2].name+"";return{c(){n=m("channel"),e=m("img"),o=d(),s=m("name"),r=p(f),v(e,"alt",l=t[2].name+"}"),a(e.src,c=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")||v(e,"src",c),v(e,"class","svelte-10roytx"),x(e,"eliminated",t[3]),v(s,"class","svelte-10roytx"),v(n,"class","svelte-10roytx"),x(n,"winner",t[1])},m(t,l){u(t,n,l),i(n,e),i(n,o),i(n,s),i(s,r)},p(t,o){4&o&&l!==(l=t[2].name+"}")&&v(e,"alt",l),4&o&&!a(e.src,c=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")&&v(e,"src",c),8&o&&x(e,"eliminated",t[3]),4&o&&f!==(f=t[2].name+"")&&I(r,f),2&o&&x(n,"winner",t[1])},d(t){t&&h(n)}}}function Q(t){let n,e,c,o,s,r,f,$,D,w,y,b,k,C,M=t[2].name+"";return{c(){n=m("channel"),e=m("img"),s=d(),r=m("name"),f=p(M),$=d(),D=m("a"),w=m("img"),v(e,"class","interactive svelte-10roytx"),v(e,"alt",c=t[2].name+"}"),a(e.src,o=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")||v(e,"src",o),x(e,"eliminated",t[3]),v(r,"class","interactive svelte-10roytx"),v(w,"class","logo svelte-10roytx"),v(w,"alt","Youtube logo"),a(w.src,y="yt.svg")||v(w,"src","yt.svg"),v(D,"href",b=`https://www.youtube.com/watch?v=${t[2].vidID}`),v(D,"target","_blank"),v(n,"class","svelte-10roytx"),x(n,"winner",t[1]),x(n,"focused",t[0])},m(l,c){u(l,n,c),i(n,e),i(n,s),i(n,r),i(r,f),i(r,$),i(n,D),i(D,w),k||(C=[g(e,"click",t[4]),g(r,"click",t[4])],k=!0)},p(t,l){4&l&&c!==(c=t[2].name+"}")&&v(e,"alt",c),4&l&&!a(e.src,o=t[2].vidID?`https://i3.ytimg.com/vi/${t[2].vidID}/maxresdefault.jpg`:"ytempty.svg")&&v(e,"src",o),8&l&&x(e,"eliminated",t[3]),4&l&&M!==(M=t[2].name+"")&&I(f,M),4&l&&b!==(b=`https://www.youtube.com/watch?v=${t[2].vidID}`)&&v(D,"href",b),2&l&&x(n,"winner",t[1]),1&l&&x(n,"focused",t[0])},d(t){t&&h(n),k=!1,l(C)}}}function X(n){let e;function l(t,n){return t[0]?Q:K}let c=l(n),o=c(n);return{c(){o.c(),e=$()},m(t,n){o.m(t,n),u(t,e,n)},p(t,[n]){c===(c=l(t))&&o?o.p(t,n):(o.d(1),o=c(t),o&&(o.c(),o.m(e.parentNode,e)))},i:t,o:t,d(t){o.d(t),t&&h(e)}}}function Z(t,n,e){let l,c,o,{controller:s}=n,{channels:r=[]}=n,{matchID:a}=n,{matches:i}=n,{selector:u}=n,{focused:h=!1}=n;return t.$$set=t=>{"controller"in t&&e(6,s=t.controller),"channels"in t&&e(7,r=t.channels),"matchID"in t&&e(8,a=t.matchID),"matches"in t&&e(5,i=t.matches),"selector"in t&&e(9,u=t.selector),"focused"in t&&e(0,h=t.focused)},t.$$.update=()=>{928&t.$$.dirty&&(null===i[a][u]?e(2,l={name:"TBD"}):r[i[a][u]]?e(2,l=r[i[a][u]]):e(2,l={name:"BYE"})),800&t.$$.dirty&&e(1,c=i[a].winner===u),290&t.$$.dirty&&e(3,o=!c&&void 0!==i[a].winner)},[h,c,l,o,function(){if(null===i[a][0]||null===i[a][1])return;if(!s.reset(a))return;if(u===i[a].winner)return void e(5,i[a].winner=void 0,i);if(e(5,i[a].winner=u,i),0===a)return;let t=a%2,n=t?a-1:a-2;n/=2,e(5,i[n][t?0:1]=i[a][u],i),e(5,i[n].winner=void 0,i)},i,s,r,a,u]}class tt extends G{constructor(t){super(),F(this,t,Z,X,o,{controller:6,channels:7,matchID:8,matches:5,selector:9,focused:0})}}function nt(n){let e,l,c,o,s,r,a,f,$,g,D,x,y,b,k=n[0][n[1]].poll.result[0]+"",C=n[0][n[1]].poll.result[1]+"";return{c(){e=m("pollFrame"),l=m("voteCommands"),l.innerHTML='<voteCommand class="channel1 svelte-jr0rpt">1</voteCommand> \n        <span class="vs svelte-jr0rpt">VS</span> \n        <voteCommand class="channel2 svelte-jr0rpt">2</voteCommand>',c=d(),o=m("results"),s=m("votes"),r=p(k),a=d(),f=m("span"),f.textContent="VOTES",$=d(),g=m("votes"),D=p(C),x=d(),y=m("pollBar"),b=m("resultBar"),v(l,"class","svelte-jr0rpt"),v(s,"class","channel1 svelte-jr0rpt"),v(g,"class","channel2 svelte-jr0rpt"),v(o,"class","svelte-jr0rpt"),w(b,"width",(Number.isNaN(n[2])?50:n[2])+"%"),v(b,"class","svelte-jr0rpt"),v(y,"class","svelte-jr0rpt"),v(e,"class","svelte-jr0rpt")},m(t,n){u(t,e,n),i(e,l),i(e,c),i(e,o),i(o,s),i(s,r),i(o,a),i(o,f),i(o,$),i(o,g),i(g,D),i(e,x),i(e,y),i(y,b)},p(t,[n]){3&n&&k!==(k=t[0][t[1]].poll.result[0]+"")&&I(r,k),3&n&&C!==(C=t[0][t[1]].poll.result[1]+"")&&I(D,C),4&n&&w(b,"width",(Number.isNaN(t[2])?50:t[2])+"%")},i:t,o:t,d(t){t&&h(e)}}}function et(t,n,e){let l,c,o,{controller:s}=n,{matchID:r}=n,{matches:a}=n;return t.$$set=t=>{"controller"in t&&e(3,s=t.controller),"matchID"in t&&e(1,r=t.matchID),"matches"in t&&e(0,a=t.matches)},t.$$.update=()=>{3&t.$$.dirty&&e(2,l=100*a[r].poll.result[0]/(a[r].poll.result[0]+a[r].poll.result[1])),8&t.$$.dirty&&function(t){if(o===t)return;c&&(console.log(c),c.disconnect()),console.log(t),c=new window.tmi.Client({channels:[t.toLowerCase()]}),c.connect().then((()=>console.log("CONNECTED"))),c.on("message",(async(t,n,l,c)=>{a[r].poll.participants.includes(n["user-id"])||("1"===l?e(0,a[r].poll.result[0]++,a):"2"===l&&e(0,a[r].poll.result[1]++,a),a[r].poll.participants.push(n["user-id"]),console.log(l,a[r].poll.participants))})),o=t}(s.settings.twitchChannel.value)},[a,r,l,s]}class lt extends G{constructor(t){super(),F(this,t,et,nt,o,{controller:3,matchID:1,matches:0})}}function ct(t){let n,e,c,o,s,r,a,i,f,p,$,I,D,w,x,y;function b(n){t[5](n)}let k={focused:!0,controller:t[0],channels:t[3],matchID:t[2],selector:1};function M(n){t[6](n)}function j(n){t[7](n)}void 0!==t[1]&&(k.matches=t[1]),c=new tt({props:k}),C.push((()=>R(c,"matches",b)));let L={matchID:t[2]};function N(n){t[8](n)}void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),r=new lt({props:L}),C.push((()=>R(r,"controller",M))),C.push((()=>R(r,"matches",j)));let B={focused:!0,controller:t[0],channels:t[3],matchID:t[2],selector:0};return void 0!==t[1]&&(B.matches=t[1]),p=new tt({props:B}),C.push((()=>R(p,"matches",N))),{c(){n=m("nav"),n.textContent="←",e=d(),Y(c.$$.fragment),s=d(),Y(r.$$.fragment),f=d(),Y(p.$$.fragment),I=d(),D=m("nav"),D.textContent="→",v(n,"class","interactive svelte-1irb0dj"),v(D,"class","interactive svelte-1irb0dj")},m(l,o){u(l,n,o),u(l,e,o),J(c,l,o),u(l,s,o),J(r,l,o),u(l,f,o),J(p,l,o),u(l,I,o),u(l,D,o),w=!0,x||(y=[g(n,"click",t[4]),g(D,"click",t[9])],x=!0)},p(t,n){const e={};1&n&&(e.controller=t[0]),8&n&&(e.channels=t[3]),4&n&&(e.matchID=t[2]),!o&&2&n&&(o=!0,e.matches=t[1],_((()=>o=!1))),c.$set(e);const l={};4&n&&(l.matchID=t[2]),!a&&1&n&&(a=!0,l.controller=t[0],_((()=>a=!1))),!i&&2&n&&(i=!0,l.matches=t[1],_((()=>i=!1))),r.$set(l);const s={};1&n&&(s.controller=t[0]),8&n&&(s.channels=t[3]),4&n&&(s.matchID=t[2]),!$&&2&n&&($=!0,s.matches=t[1],_((()=>$=!1))),p.$set(s)},i(t){w||(H(c.$$.fragment,t),H(r.$$.fragment,t),H(p.$$.fragment,t),w=!0)},o(t){P(c.$$.fragment,t),P(r.$$.fragment,t),P(p.$$.fragment,t),w=!1},d(t){t&&h(n),t&&h(e),V(c,t),t&&h(s),V(r,t),t&&h(f),V(p,t),t&&h(I),t&&h(D),x=!1,l(y)}}}function ot(t){let n,e,l=t[1]&&ct(t);return{c(){n=m("match"),l&&l.c(),v(n,"class","svelte-1irb0dj")},m(t,c){u(t,n,c),l&&l.m(n,null),e=!0},p(t,[e]){t[1]?l?(l.p(t,e),2&e&&H(l,1)):(l=ct(t),l.c(),H(l,1),l.m(n,null)):l&&(A(),P(l,1,1,(()=>{l=null})),q())},i(t){e||(H(l),e=!0)},o(t){P(l),e=!1},d(t){t&&h(n),l&&l.d()}}}function st(t,n,e){let{matchID:l}=n,{controller:c}=n,{channels:o}=n,{matches:s}=n;return t.$$set=t=>{"matchID"in t&&e(2,l=t.matchID),"controller"in t&&e(0,c=t.controller),"channels"in t&&e(3,o=t.channels),"matches"in t&&e(1,s=t.matches)},[c,s,l,o,()=>c.focusMatch(l+1),function(t){s=t,e(1,s)},function(t){c=t,e(0,c)},function(t){s=t,e(1,s)},function(t){s=t,e(1,s)},()=>c.focusMatch(l-1)]}class rt extends G{constructor(t){super(),F(this,t,st,ot,o,{matchID:2,controller:0,channels:3,matches:1})}}function at(t){let n,e,l,c,o,s,r,a,f,p,$,g,I,D,w,x,y,b,k;function M(n){t[14](n)}function j(n){t[15](n)}let L={channels:t[2],matchID:t[3],selector:1};function N(n){t[16](n)}function B(n){t[17](n)}void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),o=new tt({props:L}),C.push((()=>R(o,"controller",M))),C.push((()=>R(o,"matches",j)));let S={channels:t[2],matchID:t[3],selector:0};return void 0!==t[0]&&(S.controller=t[0]),void 0!==t[1]&&(S.matches=t[1]),D=new tt({props:S}),C.push((()=>R(D,"controller",N))),C.push((()=>R(D,"matches",B))),{c(){n=m("finalMatch"),e=m("finalChannel"),l=m("verticalLine"),c=d(),Y(o.$$.fragment),a=d(),f=m("verticalLine"),p=d(),$=m("finalChannel"),g=m("verticalLine"),I=d(),Y(D.$$.fragment),y=d(),b=m("verticalLine"),v(l,"class","final svelte-tnttx0"),v(f,"class","final placeholder svelte-tnttx0"),v(e,"class","svelte-tnttx0"),v(g,"class","final placeholder svelte-tnttx0"),v(b,"class","final svelte-tnttx0"),v($,"class","svelte-tnttx0"),v(n,"class","svelte-tnttx0")},m(t,s){u(t,n,s),i(n,e),i(e,l),i(e,c),J(o,e,null),i(e,a),i(e,f),i(n,p),i(n,$),i($,g),i($,I),J(D,$,null),i($,y),i($,b),k=!0},p(t,n){const e={};4&n&&(e.channels=t[2]),8&n&&(e.matchID=t[3]),!s&&1&n&&(s=!0,e.controller=t[0],_((()=>s=!1))),!r&&2&n&&(r=!0,e.matches=t[1],_((()=>r=!1))),o.$set(e);const l={};4&n&&(l.channels=t[2]),8&n&&(l.matchID=t[3]),!w&&1&n&&(w=!0,l.controller=t[0],_((()=>w=!1))),!x&&2&n&&(x=!0,l.matches=t[1],_((()=>x=!1))),D.$set(l)},i(t){k||(H(o.$$.fragment,t),H(D.$$.fragment,t),k=!0)},o(t){P(o.$$.fragment,t),P(D.$$.fragment,t),k=!1},d(t){t&&h(n),V(o),V(D)}}}function it(t){let n,e,l,c,o,s,r,a,f,p,$,g,I=!t[5]&&ht();function D(n){t[10](n)}function w(n){t[11](n)}let y={channels:t[2],matchID:t[3],selector:1};function b(n){t[12](n)}function k(n){t[13](n)}void 0!==t[0]&&(y.controller=t[0]),void 0!==t[1]&&(y.matches=t[1]),l=new tt({props:y}),C.push((()=>R(l,"controller",D))),C.push((()=>R(l,"matches",w)));let M={channels:t[2],matchID:t[3],selector:0};return void 0!==t[0]&&(M.controller=t[0]),void 0!==t[1]&&(M.matches=t[1]),r=new tt({props:M}),C.push((()=>R(r,"controller",b))),C.push((()=>R(r,"matches",k))),{c(){I&&I.c(),n=d(),e=m("channels"),Y(l.$$.fragment),s=d(),Y(r.$$.fragment),p=d(),$=m("bracketLine"),v(e,"class","left svelte-tnttx0"),x(e,"leaf",t[5]),v($,"class","left svelte-tnttx0")},m(t,c){I&&I.m(t,c),u(t,n,c),u(t,e,c),J(l,e,null),i(e,s),J(r,e,null),u(t,p,c),u(t,$,c),g=!0},p(t,s){t[5]?I&&(I.d(1),I=null):I||(I=ht(),I.c(),I.m(n.parentNode,n));const i={};4&s&&(i.channels=t[2]),8&s&&(i.matchID=t[3]),!c&&1&s&&(c=!0,i.controller=t[0],_((()=>c=!1))),!o&&2&s&&(o=!0,i.matches=t[1],_((()=>o=!1))),l.$set(i);const u={};4&s&&(u.channels=t[2]),8&s&&(u.matchID=t[3]),!a&&1&s&&(a=!0,u.controller=t[0],_((()=>a=!1))),!f&&2&s&&(f=!0,u.matches=t[1],_((()=>f=!1))),r.$set(u),(!g||32&s)&&x(e,"leaf",t[5])},i(t){g||(H(l.$$.fragment,t),H(r.$$.fragment,t),g=!0)},o(t){P(l.$$.fragment,t),P(r.$$.fragment,t),g=!1},d(t){I&&I.d(t),t&&h(n),t&&h(e),V(l),V(r),t&&h(p),t&&h($)}}}function ut(t){let n,e,l,c,o,s,r,a,f,p,g,I,D;function w(n){t[6](n)}function y(n){t[7](n)}let b={channels:t[2],matchID:t[3],selector:1};function k(n){t[8](n)}function M(n){t[9](n)}void 0!==t[0]&&(b.controller=t[0]),void 0!==t[1]&&(b.matches=t[1]),c=new tt({props:b}),C.push((()=>R(c,"controller",w))),C.push((()=>R(c,"matches",y)));let j={channels:t[2],matchID:t[3],selector:0};void 0!==t[0]&&(j.controller=t[0]),void 0!==t[1]&&(j.matches=t[1]),a=new tt({props:j}),C.push((()=>R(a,"controller",k))),C.push((()=>R(a,"matches",M)));let L=!t[5]&&ft();return{c(){n=m("bracketLine"),e=d(),l=m("channels"),Y(c.$$.fragment),r=d(),Y(a.$$.fragment),g=d(),L&&L.c(),I=$(),v(n,"class","right svelte-tnttx0"),v(l,"class","right svelte-tnttx0"),x(l,"leaf",t[5])},m(t,o){u(t,n,o),u(t,e,o),u(t,l,o),J(c,l,null),i(l,r),J(a,l,null),u(t,g,o),L&&L.m(t,o),u(t,I,o),D=!0},p(t,n){const e={};4&n&&(e.channels=t[2]),8&n&&(e.matchID=t[3]),!o&&1&n&&(o=!0,e.controller=t[0],_((()=>o=!1))),!s&&2&n&&(s=!0,e.matches=t[1],_((()=>s=!1))),c.$set(e);const r={};4&n&&(r.channels=t[2]),8&n&&(r.matchID=t[3]),!f&&1&n&&(f=!0,r.controller=t[0],_((()=>f=!1))),!p&&2&n&&(p=!0,r.matches=t[1],_((()=>p=!1))),a.$set(r),(!D||32&n)&&x(l,"leaf",t[5]),t[5]?L&&(L.d(1),L=null):L||(L=ft(),L.c(),L.m(I.parentNode,I))},i(t){D||(H(c.$$.fragment,t),H(a.$$.fragment,t),D=!0)},o(t){P(c.$$.fragment,t),P(a.$$.fragment,t),D=!1},d(t){t&&h(n),t&&h(e),t&&h(l),V(c),V(a),t&&h(g),L&&L.d(t),t&&h(I)}}}function ht(t){let n;return{c(){n=m("lines"),n.innerHTML='<verticalLine class="svelte-tnttx0"></verticalLine> \n                <verticalLine class="svelte-tnttx0"></verticalLine>',v(n,"class","svelte-tnttx0")},m(t,e){u(t,n,e)},d(t){t&&h(n)}}}function ft(t){let n;return{c(){n=m("lines"),n.innerHTML='<verticalLine class="svelte-tnttx0"></verticalLine> \n                <verticalLine class="svelte-tnttx0"></verticalLine>',v(n,"class","svelte-tnttx0")},m(t,e){u(t,n,e)},d(t){t&&h(n)}}}function mt(t){let n,e,l,c,o,s;const r=[ut,it,at],a=[];function i(t,n){return"right"===t[4]?0:"left"===t[4]?1:2}return e=i(t),l=a[e]=r[e](t),{c(){n=m("match"),l.c(),v(n,"class","svelte-tnttx0")},m(l,r){u(l,n,r),a[e].m(n,null),c=!0,o||(s=g(n,"click",t[18]),o=!0)},p(t,[c]){let o=e;e=i(t),e===o?a[e].p(t,c):(A(),P(a[o],1,1,(()=>{a[o]=null})),q(),l=a[e],l?l.p(t,c):(l=a[e]=r[e](t),l.c()),H(l,1),l.m(n,null))},i(t){c||(H(l),c=!0)},o(t){P(l),c=!1},d(t){t&&h(n),a[e].d(),o=!1,s()}}}function pt(t,n,e){let{controller:l}=n,{channels:c=null}=n,{matches:o}=n,{matchID:s}=n,{orientation:r}=n,{leaf:a=!1}=n;return t.$$set=t=>{"controller"in t&&e(0,l=t.controller),"channels"in t&&e(2,c=t.channels),"matches"in t&&e(1,o=t.matches),"matchID"in t&&e(3,s=t.matchID),"orientation"in t&&e(4,r=t.orientation),"leaf"in t&&e(5,a=t.leaf)},[l,o,c,s,r,a,function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},function(t){l=t,e(0,l)},function(t){o=t,e(1,o)},()=>l.focusMatch(s)]}class dt extends G{constructor(t){super(),F(this,t,pt,mt,o,{controller:0,channels:2,matches:1,matchID:3,orientation:4,leaf:5})}}function $t(t){let n,e,l,c,o;function s(n){t[25](n)}function r(n){t[26](n)}let a={leaf:!0,orientation:t[6],channels:t[4],matchID:t[3]};return void 0!==t[0]&&(a.controller=t[0]),void 0!==t[1]&&(a.matches=t[1]),e=new dt({props:a}),C.push((()=>R(e,"controller",s))),C.push((()=>R(e,"matches",r))),{c(){n=m("current"),Y(e.$$.fragment)},m(t,l){u(t,n,l),J(e,n,null),o=!0},p(t,n){const o={};64&n&&(o.orientation=t[6]),16&n&&(o.channels=t[4]),8&n&&(o.matchID=t[3]),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o)},i(t){o||(H(e.$$.fragment,t),o=!0)},o(t){P(e.$$.fragment,t),o=!1},d(t){t&&h(n),V(e)}}}function gt(t){let n,e,l,c;const o=[Dt,It],s=[];function r(t,n){return"right"===t[6]?0:1}return n=r(t),e=s[n]=o[n](t),{c(){e.c(),l=$()},m(t,e){s[n].m(t,e),u(t,l,e),c=!0},p(t,c){let a=n;n=r(t),n===a?s[n].p(t,c):(A(),P(s[a],1,1,(()=>{s[a]=null})),q(),e=s[n],e?e.p(t,c):(e=s[n]=o[n](t),e.c()),H(e,1),e.m(l.parentNode,l))},i(t){c||(H(e),c=!0)},o(t){P(e),c=!1},d(t){s[n].d(t),t&&h(l)}}}function vt(t){let n,e,l,c,o,s,r,a,i,f,p,$,g,v,I;function D(n){t[7](n)}function w(n){t[8](n)}let x={orientation:"left",level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function y(n){t[9](n)}function b(n){t[10](n)}void 0!==t[0]&&(x.controller=t[0]),void 0!==t[1]&&(x.matches=t[1]),e=new yt({props:x}),C.push((()=>R(e,"controller",D))),C.push((()=>R(e,"matches",w)));let k={orientation:"final",channels:t[4],matchID:t[3]};function M(n){t[11](n)}function j(n){t[12](n)}void 0!==t[0]&&(k.controller=t[0]),void 0!==t[1]&&(k.matches=t[1]),r=new dt({props:k}),C.push((()=>R(r,"controller",y))),C.push((()=>R(r,"matches",b)));let L={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+1};return void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),$=new yt({props:L}),C.push((()=>R($,"controller",M))),C.push((()=>R($,"matches",j))),{c(){n=m("leftbracket"),Y(e.$$.fragment),o=d(),s=m("final"),Y(r.$$.fragment),f=d(),p=m("rightbracket"),Y($.$$.fragment)},m(t,l){u(t,n,l),J(e,n,null),u(t,o,l),u(t,s,l),J(r,s,null),u(t,f,l),u(t,p,l),J($,p,null),I=!0},p(t,n){const o={};4&n&&(o.level=t[2]-1),16&n&&(o.channels=t[4]),8&n&&(o.matchID=2*t[3]+2),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o);const s={};16&n&&(s.channels=t[4]),8&n&&(s.matchID=t[3]),!a&&1&n&&(a=!0,s.controller=t[0],_((()=>a=!1))),!i&&2&n&&(i=!0,s.matches=t[1],_((()=>i=!1))),r.$set(s);const u={};4&n&&(u.level=t[2]-1),16&n&&(u.channels=t[4]),8&n&&(u.matchID=2*t[3]+1),!g&&1&n&&(g=!0,u.controller=t[0],_((()=>g=!1))),!v&&2&n&&(v=!0,u.matches=t[1],_((()=>v=!1))),$.$set(u)},i(t){I||(H(e.$$.fragment,t),H(r.$$.fragment,t),H($.$$.fragment,t),I=!0)},o(t){P(e.$$.fragment,t),P(r.$$.fragment,t),P($.$$.fragment,t),I=!1},d(t){t&&h(n),V(e),t&&h(o),t&&h(s),V(r),t&&h(f),t&&h(p),V($)}}}function It(t){let n,e,l,c,o,s,r,a,f,p,$,g,v,I;function D(n){t[19](n)}function w(n){t[20](n)}let x={level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function y(n){t[21](n)}function b(n){t[22](n)}void 0!==t[0]&&(x.controller=t[0]),void 0!==t[1]&&(x.matches=t[1]),e=new yt({props:x}),C.push((()=>R(e,"controller",D))),C.push((()=>R(e,"matches",w)));let k={level:t[2]-1,channels:t[4],matchID:2*t[3]+1};function M(n){t[23](n)}function j(n){t[24](n)}void 0!==t[0]&&(k.controller=t[0]),void 0!==t[1]&&(k.matches=t[1]),s=new yt({props:k}),C.push((()=>R(s,"controller",y))),C.push((()=>R(s,"matches",b)));let L={orientation:t[6],channels:t[4],matchID:t[3]};return void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),$=new dt({props:L}),C.push((()=>R($,"controller",M))),C.push((()=>R($,"matches",j))),{c(){n=m("previous"),Y(e.$$.fragment),o=d(),Y(s.$$.fragment),f=d(),p=m("current"),Y($.$$.fragment)},m(t,l){u(t,n,l),J(e,n,null),i(n,o),J(s,n,null),u(t,f,l),u(t,p,l),J($,p,null),I=!0},p(t,n){const o={};4&n&&(o.level=t[2]-1),16&n&&(o.channels=t[4]),8&n&&(o.matchID=2*t[3]+2),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o);const i={};4&n&&(i.level=t[2]-1),16&n&&(i.channels=t[4]),8&n&&(i.matchID=2*t[3]+1),!r&&1&n&&(r=!0,i.controller=t[0],_((()=>r=!1))),!a&&2&n&&(a=!0,i.matches=t[1],_((()=>a=!1))),s.$set(i);const u={};64&n&&(u.orientation=t[6]),16&n&&(u.channels=t[4]),8&n&&(u.matchID=t[3]),!g&&1&n&&(g=!0,u.controller=t[0],_((()=>g=!1))),!v&&2&n&&(v=!0,u.matches=t[1],_((()=>v=!1))),$.$set(u)},i(t){I||(H(e.$$.fragment,t),H(s.$$.fragment,t),H($.$$.fragment,t),I=!0)},o(t){P(e.$$.fragment,t),P(s.$$.fragment,t),P($.$$.fragment,t),I=!1},d(t){t&&h(n),V(e),V(s),t&&h(f),t&&h(p),V($)}}}function Dt(t){let n,e,l,c,o,s,r,a,f,p,$,g,v,I;function D(n){t[13](n)}function w(n){t[14](n)}let x={orientation:t[6],channels:t[4],matchID:t[3]};function y(n){t[15](n)}function b(n){t[16](n)}void 0!==t[0]&&(x.controller=t[0]),void 0!==t[1]&&(x.matches=t[1]),e=new dt({props:x}),C.push((()=>R(e,"controller",D))),C.push((()=>R(e,"matches",w)));let k={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+2};function M(n){t[17](n)}function j(n){t[18](n)}void 0!==t[0]&&(k.controller=t[0]),void 0!==t[1]&&(k.matches=t[1]),r=new yt({props:k}),C.push((()=>R(r,"controller",y))),C.push((()=>R(r,"matches",b)));let L={orientation:"right",level:t[2]-1,channels:t[4],matchID:2*t[3]+1};return void 0!==t[0]&&(L.controller=t[0]),void 0!==t[1]&&(L.matches=t[1]),$=new yt({props:L}),C.push((()=>R($,"controller",M))),C.push((()=>R($,"matches",j))),{c(){n=m("current"),Y(e.$$.fragment),o=d(),s=m("previous"),Y(r.$$.fragment),p=d(),Y($.$$.fragment)},m(t,l){u(t,n,l),J(e,n,null),u(t,o,l),u(t,s,l),J(r,s,null),i(s,p),J($,s,null),I=!0},p(t,n){const o={};64&n&&(o.orientation=t[6]),16&n&&(o.channels=t[4]),8&n&&(o.matchID=t[3]),!l&&1&n&&(l=!0,o.controller=t[0],_((()=>l=!1))),!c&&2&n&&(c=!0,o.matches=t[1],_((()=>c=!1))),e.$set(o);const s={};4&n&&(s.level=t[2]-1),16&n&&(s.channels=t[4]),8&n&&(s.matchID=2*t[3]+2),!a&&1&n&&(a=!0,s.controller=t[0],_((()=>a=!1))),!f&&2&n&&(f=!0,s.matches=t[1],_((()=>f=!1))),r.$set(s);const i={};4&n&&(i.level=t[2]-1),16&n&&(i.channels=t[4]),8&n&&(i.matchID=2*t[3]+1),!g&&1&n&&(g=!0,i.controller=t[0],_((()=>g=!1))),!v&&2&n&&(v=!0,i.matches=t[1],_((()=>v=!1))),$.$set(i)},i(t){I||(H(e.$$.fragment,t),H(r.$$.fragment,t),H($.$$.fragment,t),I=!0)},o(t){P(e.$$.fragment,t),P(r.$$.fragment,t),P($.$$.fragment,t),I=!1},d(t){t&&h(n),V(e),t&&h(o),t&&h(s),V(r),V($)}}}function wt(t){let n,e,l,c;const o=[vt,gt,$t],s=[];function r(t,n){return t[5]?0:0!==t[2]?1:2}return e=r(t),l=s[e]=o[e](t),{c(){n=m("bracket"),l.c(),v(n,"class","interactive svelte-1e3ds4x")},m(t,l){u(t,n,l),s[e].m(n,null),c=!0},p(t,[c]){let a=e;e=r(t),e===a?s[e].p(t,c):(A(),P(s[a],1,1,(()=>{s[a]=null})),q(),l=s[e],l?l.p(t,c):(l=s[e]=o[e](t),l.c()),H(l,1),l.m(n,null))},i(t){c||(H(l),c=!0)},o(t){P(l),c=!1},d(t){t&&h(n),s[e].d()}}}function xt(t,n,e){let{controller:l}=n,{level:c=0}=n,{matchID:o=0}=n,{channels:s=null}=n,{matches:r}=n,{final:a=!1}=n,{orientation:i="left"}=n;return t.$$set=t=>{"controller"in t&&e(0,l=t.controller),"level"in t&&e(2,c=t.level),"matchID"in t&&e(3,o=t.matchID),"channels"in t&&e(4,s=t.channels),"matches"in t&&e(1,r=t.matches),"final"in t&&e(5,a=t.final),"orientation"in t&&e(6,i=t.orientation)},[l,r,c,o,s,a,i,function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)},function(t){l=t,e(0,l)},function(t){r=t,e(1,r)}]}class yt extends G{constructor(t){super(),F(this,t,xt,wt,o,{controller:0,level:2,matchID:3,channels:4,matches:1,final:5,orientation:6})}}function bt(t,n,e){const l=t.slice();return l[20]=n[e][0],l[21]=n[e][1],l[22]=n,l[23]=e,l}function kt(t,n,e){const l=t.slice();return l[24]=n[e].name,l[25]=n[e].vidID,l[26]=n,l[23]=e,l}function Ct(t){let n,e,c,o,s,r,a,p,$,I,D,w,x,y,b,k,C,M,j,L,N,B,_,S,E,T,O=t[0]&&Mt(t),U=Object.entries(t[1].settings),z=[];for(let n=0;n<U.length;n+=1)z[n]=Lt(bt(t,U,n));return{c(){n=m("dataLabel"),n.textContent="Channels",e=d(),c=m("section"),o=m("formBlock"),O&&O.c(),s=d(),r=m("channel"),a=m("channelButton"),a.textContent="＋",p=d(),$=m("jsonBlock"),I=m("textarea"),D=d(),w=m("dataLabel"),w.textContent="Settings",x=d(),y=m("section"),b=m("formBlock");for(let t=0;t<z.length;t+=1)z[t].c();k=d(),C=m("jsonBlock"),M=m("textarea"),j=d(),L=m("dataLabel"),L.textContent="Template URL",N=d(),B=m("section"),_=m("jsonBlock"),S=m("textarea"),v(n,"class","svelte-1p2gsfr"),v(a,"class","add svelte-1p2gsfr"),v(r,"class","svelte-1p2gsfr"),v(o,"class","svelte-1p2gsfr"),v(I,"class","json svelte-1p2gsfr"),I.value=t[3],v($,"class","svelte-1p2gsfr"),v(c,"class","svelte-1p2gsfr"),v(w,"class","svelte-1p2gsfr"),v(b,"class","svelte-1p2gsfr"),v(M,"class","json svelte-1p2gsfr"),M.value=t[4],v(C,"class","svelte-1p2gsfr"),v(y,"class","svelte-1p2gsfr"),v(L,"class","svelte-1p2gsfr"),v(S,"class","json svelte-1p2gsfr"),S.value=t[7],v(_,"class","svelte-1p2gsfr"),v(B,"class","svelte-1p2gsfr")},m(l,h){u(l,n,h),u(l,e,h),u(l,c,h),i(c,o),O&&O.m(o,null),i(o,s),i(o,r),i(r,a),i(c,p),i(c,$),i($,I),t[15](I),u(l,D,h),u(l,w,h),u(l,x,h),u(l,y,h),i(y,b);for(let t=0;t<z.length;t+=1)z[t].m(b,null);i(y,k),i(y,C),i(C,M),t[18](M),u(l,j,h),u(l,L,h),u(l,N,h),u(l,B,h),i(B,_),i(_,S),E||(T=[g(a,"click",t[9]),g(I,"input",t[16]),g(M,"input",t[19])],E=!0)},p(t,n){if(t[0]?O?O.p(t,n):(O=Mt(t),O.c(),O.m(o,s)):O&&(O.d(1),O=null),8&n&&(I.value=t[3]),2&n){let e;for(U=Object.entries(t[1].settings),e=0;e<U.length;e+=1){const l=bt(t,U,e);z[e]?z[e].p(l,n):(z[e]=Lt(l),z[e].c(),z[e].m(b,null))}for(;e<z.length;e+=1)z[e].d(1);z.length=U.length}16&n&&(M.value=t[4]),128&n&&(S.value=t[7])},d(o){o&&h(n),o&&h(e),o&&h(c),O&&O.d(),t[15](null),o&&h(D),o&&h(w),o&&h(x),o&&h(y),f(z,o),t[18](null),o&&h(j),o&&h(L),o&&h(N),o&&h(B),E=!1,l(T)}}}function Mt(t){let n,e=t[0],l=[];for(let n=0;n<e.length;n+=1)l[n]=jt(kt(t,e,n));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();n=$()},m(t,e){for(let n=0;n<l.length;n+=1)l[n].m(t,e);u(t,n,e)},p(t,c){if(1025&c){let o;for(e=t[0],o=0;o<e.length;o+=1){const s=kt(t,e,o);l[o]?l[o].p(s,c):(l[o]=jt(s),l[o].c(),l[o].m(n.parentNode,n))}for(;o<l.length;o+=1)l[o].d(1);l.length=e.length}},d(t){f(l,t),t&&h(n)}}}function jt(t){let n,e,c,o,s,r,a,f,p;function $(){return t[12](t[23])}function I(){t[13].call(o,t[26],t[23])}function w(){t[14].call(r,t[26],t[23])}return{c(){n=m("channel"),e=m("channelButton"),e.textContent="⌦",c=d(),o=m("input"),s=d(),r=m("input"),a=d(),v(e,"class","delete svelte-1p2gsfr"),v(o,"type","text"),v(o,"class","channel-name svelte-1p2gsfr"),v(r,"type","text"),v(r,"class","video-id svelte-1p2gsfr"),v(n,"class","svelte-1p2gsfr")},m(l,h){u(l,n,h),i(n,e),i(n,c),i(n,o),D(o,t[24]),i(n,s),i(n,r),D(r,t[25]),i(n,a),f||(p=[g(e,"click",$),g(o,"input",I),g(r,"input",w)],f=!0)},p(n,e){t=n,1&e&&o.value!==t[24]&&D(o,t[24]),1&e&&r.value!==t[25]&&D(r,t[25])},d(t){t&&h(n),f=!1,l(p)}}}function Lt(t){let n,e,l,c,o,s,r,a,f,$,D=t[21].name+"";function w(...n){return t[17](t[21],t[22],t[23],...n)}return{c(){n=m("setting"),e=m("settingLabel"),l=p(D),c=p(":"),o=d(),s=m("input"),a=d(),v(e,"class","svelte-1p2gsfr"),v(s,"type","text"),v(s,"class","channel-name svelte-1p2gsfr"),s.value=r=t[21].value},m(t,r){u(t,n,r),i(n,e),i(e,l),i(e,c),i(n,o),i(n,s),i(n,a),f||($=g(s,"change",w),f=!0)},p(n,e){t=n,2&e&&D!==(D=t[21].name+"")&&I(l,D),2&e&&r!==(r=t[21].value)&&s.value!==r&&(s.value=r)},d(t){t&&h(n),f=!1,$()}}}function Nt(n){let e,l,c,o,s,r=n[2]&&Ct(n);return{c(){e=m("toggleButton"),e.textContent="▶ Settings",l=d(),c=m("dataInput"),r&&r.c(),v(e,"class","interactive svelte-1p2gsfr"),v(c,"class","svelte-1p2gsfr")},m(t,a){u(t,e,a),u(t,l,a),u(t,c,a),r&&r.m(c,null),o||(s=g(e,"click",n[11]),o=!0)},p(t,[n]){t[2]?r?r.p(t,n):(r=Ct(t),r.c(),r.m(c,null)):r&&(r.d(1),r=null)},i:t,o:t,d(t){t&&h(e),t&&h(l),t&&h(c),r&&r.d(),o=!1,s()}}}function Bt(t,n,e){let l,c,o,s,r,{channels:a}=n,{controller:i}=n,u=!1;function h(t){e(0,a=JSON.parse(t.value))}function f(t){let n=a;e(0,a=[...a.slice(0,t),...a.slice(t+1)]),Math.ceil(Math.log2(a.length))<Math.ceil(Math.log2(a.length+1))&&(i.setUpBracket()||e(0,a=n))}return t.$$set=t=>{"channels"in t&&e(0,a=t.channels),"controller"in t&&e(1,i=t.controller)},t.$$.update=()=>{1&t.$$.dirty&&e(7,r=function(t){if(console.log("calc url"),!t)return;let n=location.protocol+"//"+location.host+location.pathname;n+="?channels=";for(let e=0;e<t.length;e++)n+=encodeURIComponent(t[e].name),e<t.length-1&&(n+=",");n+="&ids=";for(let e=0;e<t.length;e++)n+=encodeURIComponent(t[e].vidID),e<t.length-1&&(n+=",");return n}(a)),1&t.$$.dirty&&e(3,l=JSON.stringify(a,null,5)),2&t.$$.dirty&&e(4,c=JSON.stringify(i.settings,null,5))},[a,i,u,l,c,o,s,r,h,function(){e(0,a=[...a,{name:"",vidID:""}]),Math.ceil(Math.log2(a.length))>Math.ceil(Math.log2(a.length-1))&&(i.setUpBracket()||a.splice(a.length-1))},f,t=>{e(2,u=!u),t.target.innerHTML=u?"▼ Settings":"▶ Settings"},t=>{f(t)},function(t,n){t[n].name=this.value,e(0,a)},function(t,n){t[n].vidID=this.value,e(0,a)},function(t){C[t?"unshift":"push"]((()=>{o=t,e(5,o)}))},()=>{h(o)},(t,n,l,c)=>{e(1,n[l][1].value=c.target.value,i)},function(t){C[t?"unshift":"push"]((()=>{s=t,e(6,s)}))},()=>{h(s)}]}class _t extends G{constructor(t){super(),F(this,t,Bt,Nt,o,{channels:0,controller:1})}}function St(n){let e;return{c(){e=p("Loading...")},m(t,n){u(t,e,n)},p:t,i:t,o:t,d(t){t&&h(e)}}}function Et(t){let n,e,l,c;function o(n){t[8](n)}function s(n){t[9](n)}let r={final:!0,level:t[2]-1,channels:t[1]};return void 0!==t[4]&&(r.controller=t[4]),void 0!==t[0]&&(r.matches=t[0]),n=new yt({props:r}),C.push((()=>R(n,"controller",o))),C.push((()=>R(n,"matches",s))),{c(){Y(n.$$.fragment)},m(t,e){J(n,t,e),c=!0},p(t,c){const o={};4&c&&(o.level=t[2]-1),2&c&&(o.channels=t[1]),!e&&16&c&&(e=!0,o.controller=t[4],_((()=>e=!1))),!l&&1&c&&(l=!0,o.matches=t[0],_((()=>l=!1))),n.$set(o)},i(t){c||(H(n.$$.fragment,t),c=!0)},o(t){P(n.$$.fragment,t),c=!1},d(t){V(n,t)}}}function Tt(t){let n,e,l,c,o,s,r,a,f,p,$,I,D,w,x,y,b,k,M,j,L;function N(n){t[6](n)}function B(n){t[7](n)}let S={matchID:t[3],channels:t[1]};void 0!==t[4]&&(S.controller=t[4]),void 0!==t[0]&&(S.matches=t[0]),f=new rt({props:S}),C.push((()=>R(f,"controller",N))),C.push((()=>R(f,"matches",B)));const E=[Et,St],T=[];function O(t,n){return t[0]?0:1}function U(n){t[10](n)}function z(n){t[11](n)}D=O(t),w=T[D]=E[D](t);let W={};return void 0!==t[1]&&(W.channels=t[1]),void 0!==t[4]&&(W.controller=t[4]),y=new _t({props:W}),C.push((()=>R(y,"channels",U))),C.push((()=>R(y,"controller",z))),{c(){n=m("main"),e=m("bracketTitle"),e.textContent="Who is the best Youtuber?",l=d(),c=m("bracketDescription"),c.innerHTML='Type <span class="channel1">&quot;1&quot;</span> or\n\t\t<span class="channel2">&quot;2&quot;</span> in chat, to vote for the current matchup.',o=d(),s=m("buttonSection"),r=m("resetButton"),r.textContent="↺",a=d(),Y(f.$$.fragment),I=d(),w.c(),x=d(),Y(y.$$.fragment),v(e,"class","svelte-ashzfm"),v(c,"class","svelte-ashzfm"),v(r,"class","interactive svelte-ashzfm"),v(s,"class","svelte-ashzfm"),v(n,"class","svelte-ashzfm")},m(h,m){u(h,n,m),i(n,e),i(n,l),i(n,c),i(n,o),i(n,s),i(s,r),i(n,a),J(f,n,null),i(n,I),T[D].m(n,null),i(n,x),J(y,n,null),M=!0,j||(L=g(r,"click",t[5]),j=!0)},p(t,[e]){const l={};8&e&&(l.matchID=t[3]),2&e&&(l.channels=t[1]),!p&&16&e&&(p=!0,l.controller=t[4],_((()=>p=!1))),!$&&1&e&&($=!0,l.matches=t[0],_((()=>$=!1))),f.$set(l);let c=D;D=O(t),D===c?T[D].p(t,e):(A(),P(T[c],1,1,(()=>{T[c]=null})),q(),w=T[D],w?w.p(t,e):(w=T[D]=E[D](t),w.c()),H(w,1),w.m(n,x));const o={};!b&&2&e&&(b=!0,o.channels=t[1],_((()=>b=!1))),!k&&16&e&&(k=!0,o.controller=t[4],_((()=>k=!1))),y.$set(o)},i(t){M||(H(f.$$.fragment,t),H(w),H(y.$$.fragment,t),M=!0)},o(t){P(f.$$.fragment,t),P(w),P(y.$$.fragment,t),M=!1},d(t){t&&h(n),V(f),T[D].d(),V(y),j=!1,L()}}}function Ot(t,n){return t<=n?t:null}function Ut(t,n,e){const l=()=>structuredClone({0:null,1:null,winner:void 0,poll:{result:[0,0],participants:[]}});let c,o,s=null,r=null;b((async()=>{const t=window.location.search,n=new URLSearchParams(t);if(console.log(),n.has("channels")&&n.has("ids")){let t=[],l=n.get("channels").split(","),c=n.get("ids").split(",");for(let n=0;n<l.length;n++)t.push({name:l[n],vidID:c[n]});e(1,s=t)}else{const t=await fetch("./channels.json").then((t=>t.json()));e(1,s=await t.channels)}console.log(s);let l=JSON.parse(localStorage.getItem("WITBYmatches"));l&&l.length===s.length-1?(e(0,r=l),e(2,c=Math.ceil(Math.log2(s.length))),e(3,o=2**c-2),console.log(r)):a.setUpBracket(!0)}));let a={settings:{twitchChannel:{value:"stanz",name:"Twitch Channel"}},reset:t=>{console.log("RESET",t);let n=!1,l=t;for(;0!==l;){let t=l%2?0:1;if(l=t?(l-2)/2:(l-1)/2,!n&&void 0!==r[l].winner&&(n=confirm("You are about to reset the selected and all dependent matches. Proceed?"),!n))return!1;n&&(e(0,r[l][t]=null,r),e(0,r[l].winner=void 0,r),e(0,r[l].poll={result:[0,0],participants:[]},r))}return!0},focusMatch:t=>{e(3,o=Math.min(Math.max(0,t),r.length-1))},setUpBracket:t=>!(!t&&!confirm("Due to changed data a new bracket has to be calculated, which will reset the current bracket. Proceed?"))&&(e(2,c=Math.ceil(Math.log2(s.length))),e(3,o=2**c-2),e(0,r=function(){let t=function(t){var n=t.length,e=Math.ceil(Math.log(n)/Math.log(2)),l=Math.pow(2,e),c=l-n;if(console.log(`Number of participants: ${n}`),console.log(`Number of rounds: ${e}`),console.log(`Bracket size: ${l}`),console.log(`Required number of byes: ${c}`),n<2)return[];for(var o=[[1,2]],s=1;s<e;s++){for(var r=[],a=Math.pow(2,s+1)+1,i=0;i<o.length;i++){var u=Ot(o[i][0],n),h=Ot(a-o[i][0],n);r.push([u,h]),u=Ot(a-o[i][1],n),h=Ot(o[i][1],n),r.push([u,h])}o=r}return o}(Array.from({length:s.length},((t,n)=>n+1))),n=[];for(let t=0;t<2**(c-1)-1;t++)n[t]=l();for(let e=0;e<t.length;e++)n[2**(c-1)-1+(t.length-1-e)]={0:t[e][1]-1,1:t[e][0]-1,winner:void 0,poll:{result:[0,0],participants:[]}};return n}()),!0)};return t.$$.update=()=>{1&t.$$.dirty&&r&&(localStorage.setItem("WITBYmatches",JSON.stringify(r)),console.log("SAVED MATCHES"))},[r,s,c,o,a,()=>a.setUpBracket(),function(t){a=t,e(4,a)},function(t){r=t,e(0,r)},function(t){a=t,e(4,a)},function(t){r=t,e(0,r)},function(t){s=t,e(1,s)},function(t){a=t,e(4,a)}]}return new class extends G{constructor(t){super(),F(this,t,Ut,Tt,o,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
